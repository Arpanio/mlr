<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta property="og:image" content="https://mlr-org.github.io/mlr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mlr.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/task.html">Tasks</a>
    </li>
    <li>
      <a href="../articles/learner.html">Learners</a>
    </li>
    <li>
      <a href="../articles/train.html">Train</a>
    </li>
    <li>
      <a href="../articles/predict.html">Predict</a>
    </li>
    <li>
      <a href="../articles/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../articles/performance.html">Performance</a>
    </li>
    <li>
      <a href="../articles/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../articles/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../articles/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../articles/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../articles/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../articles/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../articles/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../articles/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../articles/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../articles/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../articles/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../articles/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../articles/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../articles/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../articles/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../articles/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../articles/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../articles/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../articles/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../articles/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../articles/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../articles/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../articles/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../articles/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../articles/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../articles/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../news/index.html">News</a>
    </li>
    <li>
      <a href="../articles/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../articles/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../articles/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../articles/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../articles/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../articles/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrng">mlrng</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/shinyMlr">shinyMlr</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.github.io">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/resample.Rmd"><code>vignettes/resample.Rmd</code></a></small>
      <div class="hidden name"><code>resample.Rmd</code></div>

    </div>

    
    
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h1>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">## Resample description: holdout with 0.67 split rate.</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">## Resample description: holdout with 0.67 split rate.</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level1">
<h1 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h1>
<p>Function <code><a href="../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">## Measures:             mse</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">## [Resample] iter 1:    26.3528396</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">## [Resample] iter 2:    21.5238760</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">## [Resample] iter 3:    25.6629513</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">## Aggregated Result: mse.test.mean=24.5132223</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">## Learner: regr.lm</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">## Aggr perf: mse.test.mean=24.5132223</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">## Runtime: 0.493291</span></a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">##  [5] "measures.test"  "aggr"           "pred"           "models"        </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">## mse.test.mean </span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">##      24.51322</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">##   iter      mse</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">## 1    1 26.35284</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">## 2    2 21.52388</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">## 3    3 25.66295</span></a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">## Resampling: subsampling</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">## Measures:             mmce        fpr         fnr         timetrain</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">## [Resample] iter 1:    0.2380952   0.3181818   0.1500000   0.0170000</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">## [Resample] iter 2:    0.3095238   0.2631579   0.3478261   0.0140000</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">## [Resample] iter 3:    0.3095238   0.4210526   0.2173913   0.0110000</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">## [Resample] iter 4:    0.3095238   0.2142857   0.3571429   0.0150000</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">## [Resample] iter 5:    0.3809524   0.4000000   0.3636364   0.0140000</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">## </span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">## Aggregated Result: mmce.test.mean=0.3095238,fpr.test.mean=0.3233356,fnr.test.mean=0.2871993,timetrain.test.mean=0.0142000</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">## </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">## Task: Sonar-example</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">## Learner: classif.rpart</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">## Aggr perf: mmce.test.mean=0.3095238,fpr.test.mean=0.3233356,fnr.test.mean=0.2871993,timetrain.test.mean=0.0142000</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="co">## Runtime: 0.136702</span></a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">## Task: Sonar-example</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">## Learner: classif.rpart</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">## Aggr perf: mmce.test.mean=0.3095238,fpr.test.mean=0.3233356,fnr.test.mean=0.2871993,timetrain.test.mean=0.0142000,ber.test.mean=0.3052675,timepredict.test.mean=0.0052000</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">## Runtime: 0.136702</span></a></code></pre></div>
<p>By default, <code><a href="../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">## Task: Sonar-example</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">## Learner: classif.rpart</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">## Aggr perf: mmce.test.mean=0.2190476,fpr.test.mean=0.2685128,fnr.test.mean=0.1884423,timetrain.test.mean=0.0146000</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">## Runtime: 0.13813</span></a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h1>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level2">
<h2 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h2>
<p>Per default, the <code><a href="../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">## Resampled Prediction for:</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">## Resample description: subsampling with 5 iterations and 0.80 split rate.</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">## time (mean): 0.01</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">##    id truth response iter  set</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">## 1  38     R        R    1 test</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">## 2 208     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">## 3  99     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">## 4 151     M        R    1 test</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">## 5  34     R        M    1 test</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">## 6 193     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">## ... (#rows: 210, #cols: 5)</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">## Resampled Prediction for:</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">## Resample description: subsampling with 5 iterations and 0.80 split rate.</span></a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb9-24" data-line-number="24"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb9-25" data-line-number="25"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb9-26" data-line-number="26"><span class="co">## time (mean): 0.01</span></a>
<a class="sourceLine" id="cb9-27" data-line-number="27"><span class="co">##    id truth response iter  set</span></a>
<a class="sourceLine" id="cb9-28" data-line-number="28"><span class="co">## 1  38     R        R    1 test</span></a>
<a class="sourceLine" id="cb9-29" data-line-number="29"><span class="co">## 2 208     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-30" data-line-number="30"><span class="co">## 3  99     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-31" data-line-number="31"><span class="co">## 4 151     M        R    1 test</span></a>
<a class="sourceLine" id="cb9-32" data-line-number="32"><span class="co">## 5  34     R        M    1 test</span></a>
<a class="sourceLine" id="cb9-33" data-line-number="33"><span class="co">## 6 193     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-34" data-line-number="34"><span class="co">## ... (#rows: 210, #cols: 5)</span></a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">##    id truth response iter  set</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">## 1  38     R        R    1 test</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">## 2 208     M        M    1 test</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">## 3  99     M        M    1 test</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">## 4 151     M        R    1 test</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">## 5  34     R        M    1 test</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">## 6 193     M        M    1 test</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">## [1] R M M M R M</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">## Levels: M R</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">## [1] R M M R M M</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">## Levels: M R</span></a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">## Task: iris-example</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">## Learner: classif.lda</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">## Aggr perf: mmce.test.mean=0.0400000</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">## Runtime: 0.0160751</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">##   iter mmce</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">## 1    1    0</span></a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">## $train</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">## $train$`1`</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">## Prediction: 100 observations</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">## time: 0.00</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">##      id      truth   response</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">## 33   33     setosa     setosa</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">## 114 114  virginica  virginica</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">## 82   82 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">## 113 113  virginica  virginica</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">## 38   38     setosa     setosa</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">## 1     1     setosa     setosa</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">## ... (#rows: 100, #cols: 3)</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">## </span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">## </span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">## $test</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">## $test$`1`</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">## Prediction: 50 observations</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="co">## time: 0.00</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">##      id     truth   response</span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="co">## 110 110 virginica  virginica</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="co">## 35   35    setosa     setosa</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="co">## 34   34    setosa     setosa</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="co">## 39   39    setosa     setosa</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="co">## 134 134 virginica versicolor</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="co">## 42   42    setosa     setosa</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="co">## ... (#rows: 50, #cols: 3)</span></a></code></pre></div>
</div>
<div id="learner-models" class="section level2">
<h2 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h2>
<p>In each resampling iteration a Learner (<code><a href="../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">## Model for learner.id=surv.coxph; learner.class=surv.coxph</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">## Trained on: task.id = lung-example; obs = 112; features = 8</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">## Hyperparameters: </span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">## </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">## Model for learner.id=surv.coxph; learner.class=surv.coxph</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">## Trained on: task.id = lung-example; obs = 111; features = 8</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">## Hyperparameters: </span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">## </span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">## Model for learner.id=surv.coxph; learner.class=surv.coxph</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">## Trained on: task.id = lung-example; obs = 111; features = 8</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">## Hyperparameters:</span></a></code></pre></div>
</div>
<div id="the-extract-option" class="section level2">
<h2 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h2>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">## This is package 'modeest' written by P. PONCET.</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">##       mpg      cyl     disp        hp     drat       wt     qsec  vs</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">## 1 18.5000 6.333333 190.1667 136.00000 3.531667 3.251667 17.89667 0.5</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">## 2 26.4000 4.000000 105.3857  84.42857 4.038571 2.245429 18.93429 1.0</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">## 3 14.9875 8.000000 388.1250 195.50000 3.190000 4.178625 16.99500 0.0</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">##          am     gear     carb</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">## 1 0.3333333 3.833333 3.666667</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">## 2 0.7142857 4.000000 1.571429</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">## 3 0.1250000 3.250000 3.000000</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">## </span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">##        mpg cyl     disp        hp     drat       wt     qsec        vs</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">## 1 20.01667   6 176.3667 125.16667 3.723333 3.060000 17.60333 0.5000000</span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">## 2 26.50000   4 103.7889  88.33333 4.017778 2.259778 19.11000 0.8888889</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">## 3 15.81429   8 323.8000 215.71429 3.264286 3.722857 16.45714 0.0000000</span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">##          am     gear     carb</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">## 1 0.5000000 4.000000 3.833333</span></a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">## 2 0.7777778 4.111111 1.444444</span></a>
<a class="sourceLine" id="cb14-29" data-line-number="29"><span class="co">## 3 0.1428571 3.285714 3.714286</span></a>
<a class="sourceLine" id="cb14-30" data-line-number="30"><span class="co">## </span></a>
<a class="sourceLine" id="cb14-31" data-line-number="31"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb14-32" data-line-number="32"><span class="co">##        mpg      cyl     disp        hp     drat       wt     qsec</span></a>
<a class="sourceLine" id="cb14-33" data-line-number="33"><span class="co">## 1 14.07500 8.000000 386.7500 239.25000 3.376250 4.201125 16.32375</span></a>
<a class="sourceLine" id="cb14-34" data-line-number="34"><span class="co">## 2 17.31667 7.333333 271.4000 150.83333 2.968333 3.629167 18.25500</span></a>
<a class="sourceLine" id="cb14-35" data-line-number="35"><span class="co">## 3 26.32857 4.285714 114.4571  77.42857 4.147143 2.443571 19.07286</span></a>
<a class="sourceLine" id="cb14-36" data-line-number="36"><span class="co">##          vs        am     gear     carb</span></a>
<a class="sourceLine" id="cb14-37" data-line-number="37"><span class="co">## 1 0.0000000 0.2500000 3.500000 4.250000</span></a>
<a class="sourceLine" id="cb14-38" data-line-number="38"><span class="co">## 2 0.3333333 0.0000000 3.000000 2.166667</span></a>
<a class="sourceLine" id="cb14-39" data-line-number="39"><span class="co">## 3 0.7142857 0.7142857 4.142857 2.000000</span></a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">## FeatureImportance:</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">## Measure: NA</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">## Contrast: NA</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">## Aggregation: function (x)  x</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">## Replace: NA</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">## Number of Monte-Carlo iterations: NA</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">## Local: FALSE</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">##      crim       zn    indus     chas      nox       rm      age  dis</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">## 1 3856.29 1978.171 1603.397 222.6729 2749.478 17572.27 2706.638 2896</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">##        rad      tax  ptratio b    lstat</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">## 1 839.0864 2826.412 3952.543 0 11162.04</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">## FeatureImportance:</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">## Measure: NA</span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">## Contrast: NA</span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"><span class="co">## Aggregation: function (x)  x</span></a>
<a class="sourceLine" id="cb15-28" data-line-number="28"><span class="co">## Replace: NA</span></a>
<a class="sourceLine" id="cb15-29" data-line-number="29"><span class="co">## Number of Monte-Carlo iterations: NA</span></a>
<a class="sourceLine" id="cb15-30" data-line-number="30"><span class="co">## Local: FALSE</span></a>
<a class="sourceLine" id="cb15-31" data-line-number="31"><span class="co">##       crim       zn    indus     chas      nox       rm      age      dis</span></a>
<a class="sourceLine" id="cb15-32" data-line-number="32"><span class="co">## 1 8460.026 185.1914 9610.827 29.31504 9436.469 13701.54 8268.919 1594.958</span></a>
<a class="sourceLine" id="cb15-33" data-line-number="33"><span class="co">##        rad      tax  ptratio        b    lstat</span></a>
<a class="sourceLine" id="cb15-34" data-line-number="34"><span class="co">## 1 646.7381 1294.186 1609.129 43.97255 17277.64</span></a>
<a class="sourceLine" id="cb15-35" data-line-number="35"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-36" data-line-number="36"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb15-37" data-line-number="37"><span class="co">## FeatureImportance:</span></a>
<a class="sourceLine" id="cb15-38" data-line-number="38"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb15-39" data-line-number="39"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-40" data-line-number="40"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb15-41" data-line-number="41"><span class="co">## Measure: NA</span></a>
<a class="sourceLine" id="cb15-42" data-line-number="42"><span class="co">## Contrast: NA</span></a>
<a class="sourceLine" id="cb15-43" data-line-number="43"><span class="co">## Aggregation: function (x)  x</span></a>
<a class="sourceLine" id="cb15-44" data-line-number="44"><span class="co">## Replace: NA</span></a>
<a class="sourceLine" id="cb15-45" data-line-number="45"><span class="co">## Number of Monte-Carlo iterations: NA</span></a>
<a class="sourceLine" id="cb15-46" data-line-number="46"><span class="co">## Local: FALSE</span></a>
<a class="sourceLine" id="cb15-47" data-line-number="47"><span class="co">##       crim       zn    indus chas      nox       rm      age      dis</span></a>
<a class="sourceLine" id="cb15-48" data-line-number="48"><span class="co">## 1 7217.315 86.80431 7417.307    0 7309.184 12665.75 5820.115 3162.396</span></a>
<a class="sourceLine" id="cb15-49" data-line-number="49"><span class="co">##        rad      tax  ptratio b    lstat</span></a>
<a class="sourceLine" id="cb15-50" data-line-number="50"><span class="co">## 1 812.0076 1341.908 525.3632 0 15580.62</span></a></code></pre></div>
<p>There is also an convenience function <code><a href="../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">## $train.inds</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">## $train.inds[[1]]</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">##   [1]  55 115 140 153 386 256 401 102 325 502 231 477 486  24 108 303 348</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">##  [18] 333 205 148 291  85 100 165 130 379 468 378 505 177 106  18 422 305</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">##  [35] 388 338 225 358 409 247 417 443 155 117 273 133 208 262  38  44 404</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">##  [52]  13  84 304   4 170 324 124 265 451 349 306 276 429 245 406 224  28</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">##  [69] 227 237 480 195  37  97 290 125 200 136 503  35 137 113 432 250 173</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">##  [86]  31 166 353 341 239 158 118 364 459 241  78 487  98 396 481 249  67</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">## [103] 501 242 485 326 357 279 371 423 506 159 434 412 168 453 359 131 281</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">## [120]  20  39 267 288 192 201 460 272   3 215  69 317 144 258 377  41 268</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">## [137] 389 285  29 392 500  49 375   6 246 191 283 129 257  14 494  81 253</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">## [154] 164 252 169 484 319 405 397  43 384 437 261 107  88 154 471 119 428</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">## [171]  25 109 420 161  94 315 430  47 463 436  30 380 212 440 454 431 214</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">## [188] 308  66 370 491 185  11 116 472 196  76 488 187 209 402 334  27  51</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">## [205]  74 475 238 234  82 318 435 328 282 229 218  15 120 439  99  62  22</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">## [222] 220 365 461 175  92 335 127 121 233  34 270 363  86 441 219 427 329</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">## [239]  65 366 368  21 182 419 474 465 416 138 340 442 263 462 202  59 198</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">## [256]   5 445 408 345 142 356  54 174 323  87 211 418 286  93 193 228 478</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">## [273] 188  57  26 146 309 103 314  95 336 407 367 444 414  91 114 446 473</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="co">## [290] 489 145 361 498 376 391 134  77 167 457 490 360 343 151 222 104 230</span></a>
<a class="sourceLine" id="cb16-22" data-line-number="22"><span class="co">## [307] 183 259 128   2 179 235 274 111   8 284 352 101 470  70 394 385  40</span></a>
<a class="sourceLine" id="cb16-23" data-line-number="23"><span class="co">## [324] 277 275 344 450 293 160 331 347 495  16  63 251  42 271 355</span></a>
<a class="sourceLine" id="cb16-24" data-line-number="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25"><span class="co">## $train.inds[[2]]</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26"><span class="co">##   [1] 207 140 307 190 123  56 401 325 231 477 108 303 216 348 469 413 205</span></a>
<a class="sourceLine" id="cb16-27" data-line-number="27"><span class="co">##  [18] 382 186 447 362 171 100 165 483 379 395 378   9 180 106  18 266 452</span></a>
<a class="sourceLine" id="cb16-28" data-line-number="28"><span class="co">##  [35]  23 388 338 225 301 297 247 417 443  46 321 248 117 143  44  13 304</span></a>
<a class="sourceLine" id="cb16-29" data-line-number="29"><span class="co">##  [52]   4  50 110  68 306 276  71  45 456 350 224 227 458 237 157 332  79</span></a>
<a class="sourceLine" id="cb16-30" data-line-number="30"><span class="co">##  [69]  37  75  53  97 399 327 290 299 503  35 137 432  32  31 240 289 424</span></a>
<a class="sourceLine" id="cb16-31" data-line-number="31"><span class="co">##  [86] 239 364  19 152 203  78 204 300 354 481 223 383 501 351 433 221 326</span></a>
<a class="sourceLine" id="cb16-32" data-line-number="32"><span class="co">## [103] 403 172 279 423 449 479 506 312 342 434 412 226 112 359 150 105 131</span></a>
<a class="sourceLine" id="cb16-33" data-line-number="33"><span class="co">## [120] 281  39 267 448 192 163 201 460 322 346 294   3 215 387 317 260 144</span></a>
<a class="sourceLine" id="cb16-34" data-line-number="34"><span class="co">## [137]  10  36 149  41 374 268 373 302 389 285  29  49  89   6 246 191 129</span></a>
<a class="sourceLine" id="cb16-35" data-line-number="35"><span class="co">## [154] 132 257 466  14 310 494 298 292 455 319 206 405 311  43 497 217 384</span></a>
<a class="sourceLine" id="cb16-36" data-line-number="36"><span class="co">## [171] 337 261  88 154 119 428 411  25 493 109 420  61  94 315 426 430 436</span></a>
<a class="sourceLine" id="cb16-37" data-line-number="37"><span class="co">## [188]  30 213 454 308 147 491 185 178 438  60 472 196  76 488 209  96 244</span></a>
<a class="sourceLine" id="cb16-38" data-line-number="38"><span class="co">## [205]  27  51 398 313  74 197 234 184 278  52 328 282 218  15 499  99 162</span></a>
<a class="sourceLine" id="cb16-39" data-line-number="39"><span class="co">## [222]  22 220 365  17 139 175  72 280 476  34 287 464 270 181 363 504 441</span></a>
<a class="sourceLine" id="cb16-40" data-line-number="40"><span class="co">## [239] 295 329  65 368 410  21 330 419 474 416 421 138 126 316 442 320 381</span></a>
<a class="sourceLine" id="cb16-41" data-line-number="41"><span class="co">## [256] 462   5 496 345 141  64  54 156   7 467   1 418 243 400  93 193 372</span></a>
<a class="sourceLine" id="cb16-42" data-line-number="42"><span class="co">## [273] 228 236  57 339 255 146 309 407 367 444  83 414 425 264  91 114  80</span></a>
<a class="sourceLine" id="cb16-43" data-line-number="43"><span class="co">## [290] 135 189  73 376 391  48 415 134  77  90 369 167  12 457 390 343 151</span></a>
<a class="sourceLine" id="cb16-44" data-line-number="44"><span class="co">## [307] 222 230 269 183 259   2 179 235 176 274 492 122 254 284 352 482 470</span></a>
<a class="sourceLine" id="cb16-45" data-line-number="45"><span class="co">## [324]  70  40 277 275 344 199 194  58 210 232 296  33 393 355</span></a>
<a class="sourceLine" id="cb16-46" data-line-number="46"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-47" data-line-number="47"><span class="co">## $train.inds[[3]]</span></a>
<a class="sourceLine" id="cb16-48" data-line-number="48"><span class="co">##   [1]  55 115 207 153 307 190 123 386  56 256 102 502 486  24 216 333 469</span></a>
<a class="sourceLine" id="cb16-49" data-line-number="49"><span class="co">##  [18] 413 382 148 186 447 291  85 362 171 130 483 395 468 505   9 180 177</span></a>
<a class="sourceLine" id="cb16-50" data-line-number="50"><span class="co">##  [35] 266 452 422 305  23 301 358 409 297  46 321 155 248 143 273 133 208</span></a>
<a class="sourceLine" id="cb16-51" data-line-number="51"><span class="co">##  [52] 262  38 404  84 170  50 324 110 124  68 265 451 349 429  71  45 245</span></a>
<a class="sourceLine" id="cb16-52" data-line-number="52"><span class="co">##  [69] 456 350 406  28 458 157 480 332 195  79  75  53 399 327 125 299 200</span></a>
<a class="sourceLine" id="cb16-53" data-line-number="53"><span class="co">##  [86] 136 113 250 173  32 166 240 289 424 353 341 158 118  19 152 459 241</span></a>
<a class="sourceLine" id="cb16-54" data-line-number="54"><span class="co">## [103] 203 204 487 300  98 396 354 223 249  67 383 351 433 221 242 485 357</span></a>
<a class="sourceLine" id="cb16-55" data-line-number="55"><span class="co">## [120] 403 172 371 449 479 159 312 342 226 168 453 112 150 105  20 448 288</span></a>
<a class="sourceLine" id="cb16-56" data-line-number="56"><span class="co">## [137] 163 322 346 272 294 387  69 260 258  10  36 149 377 374 373 302 392</span></a>
<a class="sourceLine" id="cb16-57" data-line-number="57"><span class="co">## [154] 500  89 375 283 132 466 310 298 292  81 253 164 252 455 169 484 206</span></a>
<a class="sourceLine" id="cb16-58" data-line-number="58"><span class="co">## [171] 311 397 497 217 337 437 107 471 411 493  61 161 426  47 463 380 212</span></a>
<a class="sourceLine" id="cb16-59" data-line-number="59"><span class="co">## [188] 213 440 431 214  66 370 147 178  11 116 438  60 187  96 402 244 334</span></a>
<a class="sourceLine" id="cb16-60" data-line-number="60"><span class="co">## [205] 398 313 475 197 238  82 318 184 435 278  52 229 120 499 439 162  62</span></a>
<a class="sourceLine" id="cb16-61" data-line-number="61"><span class="co">## [222]  17 461 139  92  72 335 280 127 121 233 476 287 464 181  86 504 219</span></a>
<a class="sourceLine" id="cb16-62" data-line-number="62"><span class="co">## [239] 427 295 366 410 330 182 465 421 340 126 316 263 320 381 202  59 198</span></a>
<a class="sourceLine" id="cb16-63" data-line-number="63"><span class="co">## [256] 496 445 408 142 141  64 356 174 156 323   7 467  87 211   1 243 400</span></a>
<a class="sourceLine" id="cb16-64" data-line-number="64"><span class="co">## [273] 286 372 478 188 236 339  26 255 103 314  95 336  83 425 264 446  80</span></a>
<a class="sourceLine" id="cb16-65" data-line-number="65"><span class="co">## [290] 135 473 489 145 189 361  73 498  48 415  90 369  12 390 490 360 104</span></a>
<a class="sourceLine" id="cb16-66" data-line-number="66"><span class="co">## [307] 269 128 176 492 122 111 254   8 101 482 394 385 450 293 199 194 160</span></a>
<a class="sourceLine" id="cb16-67" data-line-number="67"><span class="co">## [324] 331  58 347 495 210  16  63 232 251  42 296  33 393 271</span></a>
<a class="sourceLine" id="cb16-68" data-line-number="68"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-69" data-line-number="69"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-70" data-line-number="70"><span class="co">## $test.inds</span></a>
<a class="sourceLine" id="cb16-71" data-line-number="71"><span class="co">## $test.inds[[1]]</span></a>
<a class="sourceLine" id="cb16-72" data-line-number="72"><span class="co">##   [1]   1   7   9  10  12  17  19  23  32  33  36  45  46  48  50  52  53</span></a>
<a class="sourceLine" id="cb16-73" data-line-number="73"><span class="co">##  [18]  56  58  60  61  64  68  71  72  73  75  79  80  83  89  90  96 105</span></a>
<a class="sourceLine" id="cb16-74" data-line-number="74"><span class="co">##  [35] 110 112 122 123 126 132 135 139 141 143 147 149 150 152 156 157 162</span></a>
<a class="sourceLine" id="cb16-75" data-line-number="75"><span class="co">##  [52] 163 171 172 176 178 180 181 184 186 189 190 194 197 199 203 204 206</span></a>
<a class="sourceLine" id="cb16-76" data-line-number="76"><span class="co">##  [69] 207 210 213 216 217 221 223 226 232 236 240 243 244 248 254 255 260</span></a>
<a class="sourceLine" id="cb16-77" data-line-number="77"><span class="co">##  [86] 264 266 269 278 280 287 289 292 294 295 296 297 298 299 300 301 302</span></a>
<a class="sourceLine" id="cb16-78" data-line-number="78"><span class="co">## [103] 307 310 311 312 313 316 320 321 322 327 330 332 337 339 342 346 350</span></a>
<a class="sourceLine" id="cb16-79" data-line-number="79"><span class="co">## [120] 351 354 362 369 372 373 374 381 382 383 387 390 393 395 398 399 400</span></a>
<a class="sourceLine" id="cb16-80" data-line-number="80"><span class="co">## [137] 403 410 411 413 415 421 424 425 426 433 438 447 448 449 452 455 456</span></a>
<a class="sourceLine" id="cb16-81" data-line-number="81"><span class="co">## [154] 458 464 466 467 469 476 479 482 483 492 493 496 497 499 504</span></a>
<a class="sourceLine" id="cb16-82" data-line-number="82"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-83" data-line-number="83"><span class="co">## $test.inds[[2]]</span></a>
<a class="sourceLine" id="cb16-84" data-line-number="84"><span class="co">##   [1]   8  11  16  20  24  26  28  38  42  47  55  59  62  63  66  67  69</span></a>
<a class="sourceLine" id="cb16-85" data-line-number="85"><span class="co">##  [18]  81  82  84  85  86  87  92  95  98 101 102 103 104 107 111 113 115</span></a>
<a class="sourceLine" id="cb16-86" data-line-number="86"><span class="co">##  [35] 116 118 120 121 124 125 127 128 130 133 136 142 145 148 153 155 158</span></a>
<a class="sourceLine" id="cb16-87" data-line-number="87"><span class="co">##  [52] 159 160 161 164 166 168 169 170 173 174 177 182 187 188 195 198 200</span></a>
<a class="sourceLine" id="cb16-88" data-line-number="88"><span class="co">##  [69] 202 208 211 212 214 219 229 233 238 241 242 245 249 250 251 252 253</span></a>
<a class="sourceLine" id="cb16-89" data-line-number="89"><span class="co">##  [86] 256 258 262 263 265 271 272 273 283 286 288 291 293 305 314 318 323</span></a>
<a class="sourceLine" id="cb16-90" data-line-number="90"><span class="co">## [103] 324 331 333 334 335 336 340 341 347 349 353 356 357 358 360 361 366</span></a>
<a class="sourceLine" id="cb16-91" data-line-number="91"><span class="co">## [120] 370 371 375 377 380 385 386 392 394 396 397 402 404 406 408 409 422</span></a>
<a class="sourceLine" id="cb16-92" data-line-number="92"><span class="co">## [137] 427 429 431 435 437 439 440 445 446 450 451 453 459 461 463 465 468</span></a>
<a class="sourceLine" id="cb16-93" data-line-number="93"><span class="co">## [154] 471 473 475 478 480 484 485 486 487 489 490 495 498 500 502 505</span></a>
<a class="sourceLine" id="cb16-94" data-line-number="94"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-95" data-line-number="95"><span class="co">## $test.inds[[3]]</span></a>
<a class="sourceLine" id="cb16-96" data-line-number="96"><span class="co">##   [1]   2   3   4   5   6  13  14  15  18  21  22  25  27  29  30  31  34</span></a>
<a class="sourceLine" id="cb16-97" data-line-number="97"><span class="co">##  [18]  35  37  39  40  41  43  44  49  51  54  57  65  70  74  76  77  78</span></a>
<a class="sourceLine" id="cb16-98" data-line-number="98"><span class="co">##  [35]  88  91  93  94  97  99 100 106 108 109 114 117 119 129 131 134 137</span></a>
<a class="sourceLine" id="cb16-99" data-line-number="99"><span class="co">##  [52] 138 140 144 146 151 154 165 167 175 179 183 185 191 192 193 196 201</span></a>
<a class="sourceLine" id="cb16-100" data-line-number="100"><span class="co">##  [69] 205 209 215 218 220 222 224 225 227 228 230 231 234 235 237 239 246</span></a>
<a class="sourceLine" id="cb16-101" data-line-number="101"><span class="co">##  [86] 247 257 259 261 267 268 270 274 275 276 277 279 281 282 284 285 290</span></a>
<a class="sourceLine" id="cb16-102" data-line-number="102"><span class="co">## [103] 303 304 306 308 309 315 317 319 325 326 328 329 338 343 344 345 348</span></a>
<a class="sourceLine" id="cb16-103" data-line-number="103"><span class="co">## [120] 352 355 359 363 364 365 367 368 376 378 379 384 388 389 391 401 405</span></a>
<a class="sourceLine" id="cb16-104" data-line-number="104"><span class="co">## [137] 407 412 414 416 417 418 419 420 423 428 430 432 434 436 441 442 443</span></a>
<a class="sourceLine" id="cb16-105" data-line-number="105"><span class="co">## [154] 444 454 457 460 462 470 472 474 477 481 488 491 494 501 503 506</span></a></code></pre></div>
</div>
</div>
<div id="stratification-and-blocking" class="section level1">
<h1 class="hasAnchor">
<a href="#stratification-and-blocking" class="anchor"></a>Stratification and blocking</h1>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h2>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">## Task: iris-example</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">## Learner: classif.lda</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">## Aggr perf: mmce.test.mean=0.0201414</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">## Runtime: 0.0226283</span></a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h2>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">## Aggr perf: mse.test.mean=23.4848371</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">## Runtime: 0.0358496</span></a></code></pre></div>
</div>
<div id="blocking" class="section level2">
<h2 class="hasAnchor">
<a href="#blocking" class="anchor"></a>Blocking</h2>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> <code>factor</code> when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">## Supervised task: iris</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">## Type: classif</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">## Target: Species</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">## Observations: 150</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">## Features:</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">##    numerics     factors     ordered functionals </span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">##           4           0           0           0 </span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">## Missings: FALSE</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">## Has weights: FALSE</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">## Has blocking: TRUE</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">## Has coordinates: FALSE</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">## Classes: 3</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">##     setosa versicolor  virginica </span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">##         50         50         50 </span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="co">## Positive class: NA</span></a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level1">
<h1 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h1>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">## List of 4</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">##  $ id      : chr "cross-validation"</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">##  $ iters   : int 3</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">##  $ predict : chr "test"</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">##  $ stratify: logi FALSE</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="kw">str</span>(<span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="co">## List of 6</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="co">##  $ split        : num 0.667</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18"><span class="co">##  $ id           : chr "subsampling"</span></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"><span class="co">##  $ iters        : int 30</span></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="co">##  $ predict      : chr "test"</span></a>
<a class="sourceLine" id="cb20-21" data-line-number="21"><span class="co">##  $ stratify     : logi FALSE</span></a>
<a class="sourceLine" id="cb20-22" data-line-number="22"><span class="co">##  $ stratify.cols: chr "chas"</span></a>
<a class="sourceLine" id="cb20-23" data-line-number="23"><span class="co">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</span></a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../reference/Task.html">Task()</a></code>, function <code><a href="../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="co">## Resample instance for 150 cases.</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">## List of 5</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="co">##  $ desc      :List of 4</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"><span class="co">##   ..$ id      : chr "cross-validation"</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="co">##   ..$ iters   : int 3</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14"><span class="co">##   ..$ predict : chr "test"</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15"><span class="co">##   ..$ stratify: logi FALSE</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16"><span class="co">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17"><span class="co">##  $ size      : int 150</span></a>
<a class="sourceLine" id="cb21-18" data-line-number="18"><span class="co">##  $ train.inds:List of 3</span></a>
<a class="sourceLine" id="cb21-19" data-line-number="19"><span class="co">##   ..$ : int [1:100] 66 34 127 95 107 62 102 115 12 124 ...</span></a>
<a class="sourceLine" id="cb21-20" data-line-number="20"><span class="co">##   ..$ : int [1:100] 93 34 127 107 148 102 23 114 77 120 ...</span></a>
<a class="sourceLine" id="cb21-21" data-line-number="21"><span class="co">##   ..$ : int [1:100] 66 93 95 148 62 115 23 12 124 114 ...</span></a>
<a class="sourceLine" id="cb21-22" data-line-number="22"><span class="co">##  $ test.inds :List of 3</span></a>
<a class="sourceLine" id="cb21-23" data-line-number="23"><span class="co">##   ..$ : int [1:50] 1 5 9 14 17 19 23 25 29 31 ...</span></a>
<a class="sourceLine" id="cb21-24" data-line-number="24"><span class="co">##   ..$ : int [1:50] 2 3 7 8 11 12 15 20 24 27 ...</span></a>
<a class="sourceLine" id="cb21-25" data-line-number="25"><span class="co">##   ..$ : int [1:50] 4 6 10 13 16 18 21 22 26 28 ...</span></a>
<a class="sourceLine" id="cb21-26" data-line-number="26"><span class="co">##  $ group     : Factor w/ 0 levels: </span></a>
<a class="sourceLine" id="cb21-27" data-line-number="27"><span class="co">##  - attr(*, "class")= chr "ResampleInstance"</span></a>
<a class="sourceLine" id="cb21-28" data-line-number="28"></a>
<a class="sourceLine" id="cb21-29" data-line-number="29"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb21-30" data-line-number="30">rin =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb21-31" data-line-number="31"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-32" data-line-number="32"><span class="co">## List of 5</span></a>
<a class="sourceLine" id="cb21-33" data-line-number="33"><span class="co">##  $ desc      :List of 4</span></a>
<a class="sourceLine" id="cb21-34" data-line-number="34"><span class="co">##   ..$ id      : chr "cross-validation"</span></a>
<a class="sourceLine" id="cb21-35" data-line-number="35"><span class="co">##   ..$ iters   : int 3</span></a>
<a class="sourceLine" id="cb21-36" data-line-number="36"><span class="co">##   ..$ predict : chr "test"</span></a>
<a class="sourceLine" id="cb21-37" data-line-number="37"><span class="co">##   ..$ stratify: logi FALSE</span></a>
<a class="sourceLine" id="cb21-38" data-line-number="38"><span class="co">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</span></a>
<a class="sourceLine" id="cb21-39" data-line-number="39"><span class="co">##  $ size      : int 150</span></a>
<a class="sourceLine" id="cb21-40" data-line-number="40"><span class="co">##  $ train.inds:List of 3</span></a>
<a class="sourceLine" id="cb21-41" data-line-number="41"><span class="co">##   ..$ : int [1:100] 34 73 50 2 132 3 134 51 86 65 ...</span></a>
<a class="sourceLine" id="cb21-42" data-line-number="42"><span class="co">##   ..$ : int [1:100] 74 117 31 34 73 50 2 81 3 1 ...</span></a>
<a class="sourceLine" id="cb21-43" data-line-number="43"><span class="co">##   ..$ : int [1:100] 74 117 31 132 81 1 134 51 60 86 ...</span></a>
<a class="sourceLine" id="cb21-44" data-line-number="44"><span class="co">##  $ test.inds :List of 3</span></a>
<a class="sourceLine" id="cb21-45" data-line-number="45"><span class="co">##   ..$ : int [1:50] 1 8 12 17 19 20 21 22 25 27 ...</span></a>
<a class="sourceLine" id="cb21-46" data-line-number="46"><span class="co">##   ..$ : int [1:50] 4 5 6 7 10 11 13 23 26 28 ...</span></a>
<a class="sourceLine" id="cb21-47" data-line-number="47"><span class="co">##   ..$ : int [1:50] 2 3 9 14 15 16 18 24 33 34 ...</span></a>
<a class="sourceLine" id="cb21-48" data-line-number="48"><span class="co">##  $ group     : Factor w/ 0 levels: </span></a>
<a class="sourceLine" id="cb21-49" data-line-number="49"><span class="co">##  - attr(*, "class")= chr "ResampleInstance"</span></a>
<a class="sourceLine" id="cb21-50" data-line-number="50"></a>
<a class="sourceLine" id="cb21-51" data-line-number="51"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb21-52" data-line-number="52">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb21-53" data-line-number="53"><span class="co">##   [1]  74 117  31 132  81   1 134  51  60  86  65  53  47 130 111  70  56</span></a>
<a class="sourceLine" id="cb21-54" data-line-number="54"><span class="co">##  [18]  98 105 106 149  37  89  72  12  22 127  99 128  17  41  96  46  38</span></a>
<a class="sourceLine" id="cb21-55" data-line-number="55"><span class="co">##  [35]  21  91 116  11  67 147 108 145  97  68 133   7  61  19  36 110  90</span></a>
<a class="sourceLine" id="cb21-56" data-line-number="56"><span class="co">##  [52] 126  49  80  27   4 124  92 150   6 139  23  77  20  44  59 103 120</span></a>
<a class="sourceLine" id="cb21-57" data-line-number="57"><span class="co">##  [69]  35  83   8  71 101  25  64  26  10  39  79  29  69 118  48 113  93</span></a>
<a class="sourceLine" id="cb21-58" data-line-number="58"><span class="co">##  [86]  28  13   5  42  62  40  75 119  63 144  76  32 140  52  30</span></a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="co">## mmce.test.mean </span></a>
<a class="sourceLine" id="cb22-9" data-line-number="9"><span class="co">##           0.04</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10"></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-12" data-line-number="12"><span class="co">## mmce.test.mean </span></a>
<a class="sourceLine" id="cb22-13" data-line-number="13"><span class="co">##     0.07333333</span></a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="co">## Resample instance for 150 cases.</span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="co">## Resample description: holdout with 0.67 split rate.</span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h1>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="co">## Aggregation function: test.mean</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="co">## function(task, perf.test, perf.train, measure, group, pred) mean(perf.test)</span></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="co">## &lt;bytecode: 0x5618269ff240&gt;</span></a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="co">## &lt;environment: namespace:mlr&gt;</span></a>
<a class="sourceLine" id="cb24-9" data-line-number="9"></a>
<a class="sourceLine" id="cb24-10" data-line-number="10"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb24-11" data-line-number="11">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-12" data-line-number="12"><span class="co">## Aggregation function: test.rmse</span></a>
<a class="sourceLine" id="cb24-13" data-line-number="13"></a>
<a class="sourceLine" id="cb24-14" data-line-number="14">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-15" data-line-number="15"><span class="co">## function(task, perf.test, perf.train, measure, group, pred) sqrt(mean(perf.test^2))</span></a>
<a class="sourceLine" id="cb24-16" data-line-number="16"><span class="co">## &lt;bytecode: 0x561832ef9090&gt;</span></a>
<a class="sourceLine" id="cb24-17" data-line-number="17"><span class="co">## &lt;environment: namespace:mlr&gt;</span></a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level2">
<h2 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h2>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"></a>
<a class="sourceLine" id="cb25-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb25-6" data-line-number="6"><span class="co">## Name: Mean of squared errors</span></a>
<a class="sourceLine" id="cb25-7" data-line-number="7"><span class="co">## Performance measure: mse</span></a>
<a class="sourceLine" id="cb25-8" data-line-number="8"><span class="co">## Properties: regr,req.pred,req.truth</span></a>
<a class="sourceLine" id="cb25-9" data-line-number="9"><span class="co">## Minimize: TRUE</span></a>
<a class="sourceLine" id="cb25-10" data-line-number="10"><span class="co">## Best: 0; Worst: Inf</span></a>
<a class="sourceLine" id="cb25-11" data-line-number="11"><span class="co">## Aggregated by: test.median</span></a>
<a class="sourceLine" id="cb25-12" data-line-number="12"><span class="co">## Arguments: </span></a>
<a class="sourceLine" id="cb25-13" data-line-number="13"><span class="co">## Note: Defined as: mean((response - truth)^2)</span></a>
<a class="sourceLine" id="cb25-14" data-line-number="14"></a>
<a class="sourceLine" id="cb25-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb25-17" data-line-number="17"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb25-18" data-line-number="18"><span class="co">## Measures:             mse       mse       mse       mse</span></a>
<a class="sourceLine" id="cb25-19" data-line-number="19"><span class="co">## [Resample] iter 1:    18.893878318.893878318.893878318.8938783</span></a>
<a class="sourceLine" id="cb25-20" data-line-number="20"><span class="co">## [Resample] iter 2:    24.719259624.719259624.719259624.7192596</span></a>
<a class="sourceLine" id="cb25-21" data-line-number="21"><span class="co">## [Resample] iter 3:    27.434295927.434295927.434295927.4342959</span></a>
<a class="sourceLine" id="cb25-22" data-line-number="22"><span class="co">## </span></a>
<a class="sourceLine" id="cb25-23" data-line-number="23"><span class="co">## Aggregated Result: mse.test.mean=23.6824779,mse.test.median=24.7192596,mse.test.min=18.8938783,mse.test.max=27.4342959</span></a>
<a class="sourceLine" id="cb25-24" data-line-number="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb25-25" data-line-number="25"></a>
<a class="sourceLine" id="cb25-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb25-27" data-line-number="27"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb25-28" data-line-number="28"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb25-29" data-line-number="29"><span class="co">## Learner: regr.lm</span></a>
<a class="sourceLine" id="cb25-30" data-line-number="30"><span class="co">## Aggr perf: mse.test.mean=23.6824779,mse.test.median=24.7192596,mse.test.min=18.8938783,mse.test.max=27.4342959</span></a>
<a class="sourceLine" id="cb25-31" data-line-number="31"><span class="co">## Runtime: 0.0312202</span></a>
<a class="sourceLine" id="cb25-32" data-line-number="32"></a>
<a class="sourceLine" id="cb25-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb25-34" data-line-number="34"><span class="co">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </span></a>
<a class="sourceLine" id="cb25-35" data-line-number="35"><span class="co">##        23.68248        24.71926        18.89388        27.43430</span></a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level2">
<h2 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h2>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co">## Measures:             mmce.train   mmce.test</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="co">## [Resample] iter 1:    0.0300000    0.0600000</span></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co">## [Resample] iter 2:    0.0300000    0.0600000</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="co">## [Resample] iter 3:    0.0400000    0.0600000</span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb26-10" data-line-number="10"><span class="co">## Aggregated Result: mmce.test.mean=0.0600000,mmce.train.mean=0.0333333</span></a>
<a class="sourceLine" id="cb26-11" data-line-number="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb26-12" data-line-number="12"></a>
<a class="sourceLine" id="cb26-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb26-14" data-line-number="14"><span class="co">##   iter mmce mmce</span></a>
<a class="sourceLine" id="cb26-15" data-line-number="15"><span class="co">## 1    1 0.03 0.03</span></a>
<a class="sourceLine" id="cb26-16" data-line-number="16"><span class="co">## 2    2 0.03 0.03</span></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="co">## 3    3 0.04 0.04</span></a>
<a class="sourceLine" id="cb26-18" data-line-number="18"></a>
<a class="sourceLine" id="cb26-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb26-20" data-line-number="20"><span class="co">##  mmce.test.mean mmce.train.mean </span></a>
<a class="sourceLine" id="cb26-21" data-line-number="21"><span class="co">##      0.06000000      0.03333333</span></a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level2">
<h2 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h2>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7"></a>
<a class="sourceLine" id="cb27-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="co">## Name: Mean misclassification error</span></a>
<a class="sourceLine" id="cb27-10" data-line-number="10"><span class="co">## Performance measure: mmce</span></a>
<a class="sourceLine" id="cb27-11" data-line-number="11"><span class="co">## Properties: classif,classif.multi,req.pred,req.truth</span></a>
<a class="sourceLine" id="cb27-12" data-line-number="12"><span class="co">## Minimize: TRUE</span></a>
<a class="sourceLine" id="cb27-13" data-line-number="13"><span class="co">## Best: 0; Worst: 1</span></a>
<a class="sourceLine" id="cb27-14" data-line-number="14"><span class="co">## Aggregated by: b632</span></a>
<a class="sourceLine" id="cb27-15" data-line-number="15"><span class="co">## Arguments: </span></a>
<a class="sourceLine" id="cb27-16" data-line-number="16"><span class="co">## Note: Defined as: mean(response != truth)</span></a>
<a class="sourceLine" id="cb27-17" data-line-number="17"></a>
<a class="sourceLine" id="cb27-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb27-21" data-line-number="21"><span class="co">##   iter       mmce       mmce       mmce</span></a>
<a class="sourceLine" id="cb27-22" data-line-number="22"><span class="co">## 1    1 0.01333333 0.01333333 0.01333333</span></a>
<a class="sourceLine" id="cb27-23" data-line-number="23"><span class="co">## 2    2 0.01333333 0.01333333 0.01333333</span></a>
<a class="sourceLine" id="cb27-24" data-line-number="24"><span class="co">## 3    3 0.01333333 0.01333333 0.01333333</span></a>
<a class="sourceLine" id="cb27-25" data-line-number="25"><span class="co">## 4    4 0.02000000 0.02000000 0.02000000</span></a>
<a class="sourceLine" id="cb27-26" data-line-number="26"><span class="co">## 5    5 0.01333333 0.01333333 0.01333333</span></a>
<a class="sourceLine" id="cb27-27" data-line-number="27"><span class="co">## 6    6 0.02666667 0.02666667 0.02666667</span></a>
<a class="sourceLine" id="cb27-28" data-line-number="28"></a>
<a class="sourceLine" id="cb27-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb27-31" data-line-number="31"><span class="co">## mmce.test.mean      mmce.b632  mmce.b632plus </span></a>
<a class="sourceLine" id="cb27-32" data-line-number="32"><span class="co">##     0.08241799     0.05993884     0.06252102</span></a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h1>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="co">## Measures:             mmce      ber</span></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co">## [Resample] iter 1:    0.0000000 0.0000000</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5"><span class="co">## [Resample] iter 2:    0.0400000 0.0371517</span></a>
<a class="sourceLine" id="cb28-6" data-line-number="6"><span class="co">## [Resample] iter 3:    0.0200000 0.0196078</span></a>
<a class="sourceLine" id="cb28-7" data-line-number="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb28-8" data-line-number="8"><span class="co">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0189198</span></a>
<a class="sourceLine" id="cb28-9" data-line-number="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb28-10" data-line-number="10"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb28-11" data-line-number="11"><span class="co">## Task: iris-example</span></a>
<a class="sourceLine" id="cb28-12" data-line-number="12"><span class="co">## Learner: classif.lda</span></a>
<a class="sourceLine" id="cb28-13" data-line-number="13"><span class="co">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0189198</span></a>
<a class="sourceLine" id="cb28-14" data-line-number="14"><span class="co">## Runtime: 0.0474076</span></a>
<a class="sourceLine" id="cb28-15" data-line-number="15"></a>
<a class="sourceLine" id="cb28-16" data-line-number="16"><span class="kw"><a href="../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb28-17" data-line-number="17"><span class="co">## Resampling: OOB bootstrapping</span></a>
<a class="sourceLine" id="cb28-18" data-line-number="18"><span class="co">## Measures:             mse.train   mae.train   mse.test    mae.test</span></a>
<a class="sourceLine" id="cb28-19" data-line-number="19"><span class="co">## [Resample] iter 1:    17.7570553  2.9276743   24.3936025  3.4492232</span></a>
<a class="sourceLine" id="cb28-20" data-line-number="20"><span class="co">## [Resample] iter 2:    19.1093261  3.1540382   26.0773221  3.2607962</span></a>
<a class="sourceLine" id="cb28-21" data-line-number="21"><span class="co">## [Resample] iter 3:    20.7155595  3.1046055   22.2340967  3.5092333</span></a>
<a class="sourceLine" id="cb28-22" data-line-number="22"><span class="co">## </span></a>
<a class="sourceLine" id="cb28-23" data-line-number="23"><span class="co">## Aggregated Result: mse.b632plus=22.4418306,mae.b632plus=3.2854379</span></a>
<a class="sourceLine" id="cb28-24" data-line-number="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb28-25" data-line-number="25"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb28-26" data-line-number="26"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb28-27" data-line-number="27"><span class="co">## Learner: regr.lm</span></a>
<a class="sourceLine" id="cb28-28" data-line-number="28"><span class="co">## Aggr perf: mse.b632plus=22.4418306,mae.b632plus=3.2854379</span></a>
<a class="sourceLine" id="cb28-29" data-line-number="29"><span class="co">## Runtime: 0.0722127</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-and-blocking">Stratification and blocking</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking">Blocking</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
