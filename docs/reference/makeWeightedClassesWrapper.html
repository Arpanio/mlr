<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Wraps a classifier for weighted fitting where each class receives a weight. — makeWeightedClassesWrapper • mlr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mlr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/mlr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../articles/bagging.html">Generic Bagging</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Wraps a classifier for weighted fitting where each class receives a weight.</h1>
    </div>

    
    <p>Creates a wrapper, which can be used like any other learner object.</p>
<p>Fitting is performed in a weighted fashion where each observation receives a weight,
depending on the class it belongs to, see <code>wcw.weight</code>.
This might help to mitigate problems caused by imbalanced class distributions.</p>
<p>This weighted fitting can be achieved in two ways:</p>
<p>a) The learner already has a parameter for class weighting, so one weight can directly be defined
per class. Example: &#8220;classif.ksvm&#8221; and parameter <code>class.weights</code>.
In this case we don't really do anything fancy. We convert <code>wcw.weight</code> a bit,
but basically simply bind its value to the class weighting param.
The wrapper in this case simply offers a convenient, consistent fashion for class weighting -
and tuning! See example below.</p>
<p>b) The learner does not have a direct parameter to support class weighting, but
supports observation weights, so <code>hasLearnerProperties(learner, 'weights')</code> is <code>TRUE</code>.
This means that an individual, arbitrary weight can be set per observation during training.
We set this weight depending on the class internally in the wrapper. Basically we introduce
something like a new &#8220;class.weights&#8221; parameter for the learner via observation weights.</p>
    

    <pre class="usage"><span class='fu'>makeWeightedClassesWrapper</span>(<span class='no'>learner</span>, <span class='kw'>wcw.param</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>wcw.weight</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>learner</th>
      <td><p>[<code><a href='makeLearner.html'>Learner</a></code> | <code>character(1)</code>]
The classification learner.
If you pass a string the learner will be created via <code><a href='makeLearner.html'>makeLearner</a></code>.</p></td>
    </tr>
    <tr>
      <th>wcw.param</th>
      <td><p>[<code>character(1)</code>]
Name of already existing learner parameter, which allows class weighting.
The default (<code>wcw.param = NULL</code>) will use the parameter defined in
the learner (<code>class.weights.param</code>). During training, the parameter
must accept a named vector of class weights, where length equals the
number of classes.</p></td>
    </tr>
    <tr>
      <th>wcw.weight</th>
      <td><p>[<code>numeric</code>]
Weight for each class.
Must be a vector of the same number of elements as classes are in task,
and must also be in the same order as the class levels are in
<code>getTaskDesc(task)$class.levels</code>.
For convenience, one must pass a single number in case of binary classification, which
is then taken as the weight of the positive class, while the negative class receives a weight
of 1.
Default is 1.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>[<code><a href='makeLearner.html'>Learner</a></code>].</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other wrapper: <code><a href='makeBaggingWrapper.html'>makeBaggingWrapper</a></code>,
  <code><a href='makeClassificationViaRegressionWrapper.html'>makeClassificationViaRegressionWrapper</a></code>,
  <code><a href='makeConstantClassWrapper.html'>makeConstantClassWrapper</a></code>,
  <code><a href='makeCostSensClassifWrapper.html'>makeCostSensClassifWrapper</a></code>,
  <code><a href='makeCostSensRegrWrapper.html'>makeCostSensRegrWrapper</a></code>,
  <code><a href='makeDownsampleWrapper.html'>makeDownsampleWrapper</a></code>,
  <code><a href='makeDummyFeaturesWrapper.html'>makeDummyFeaturesWrapper</a></code>,
  <code><a href='makeExtractFDAFeatsWrapper.html'>makeExtractFDAFeatsWrapper</a></code>,
  <code><a href='makeFeatSelWrapper.html'>makeFeatSelWrapper</a></code>,
  <code><a href='makeFilterWrapper.html'>makeFilterWrapper</a></code>,
  <code><a href='makeImputeWrapper.html'>makeImputeWrapper</a></code>,
  <code><a href='makeMulticlassWrapper.html'>makeMulticlassWrapper</a></code>,
  <code><a href='makeMultilabelBinaryRelevanceWrapper.html'>makeMultilabelBinaryRelevanceWrapper</a></code>,
  <code><a href='makeMultilabelClassifierChainsWrapper.html'>makeMultilabelClassifierChainsWrapper</a></code>,
  <code><a href='makeMultilabelDBRWrapper.html'>makeMultilabelDBRWrapper</a></code>,
  <code><a href='makeMultilabelNestedStackingWrapper.html'>makeMultilabelNestedStackingWrapper</a></code>,
  <code><a href='makeMultilabelStackingWrapper.html'>makeMultilabelStackingWrapper</a></code>,
  <code><a href='makeOverBaggingWrapper.html'>makeOverBaggingWrapper</a></code>,
  <code><a href='makePreprocWrapperCaret.html'>makePreprocWrapperCaret</a></code>,
  <code><a href='makePreprocWrapper.html'>makePreprocWrapper</a></code>,
  <code><a href='makeRemoveConstantFeaturesWrapper.html'>makeRemoveConstantFeaturesWrapper</a></code>,
  <code><a href='makeSMOTEWrapper.html'>makeSMOTEWrapper</a></code>,
  <code><a href='makeTuneWrapper.html'>makeTuneWrapper</a></code>,
  <code><a href='makeUndersampleWrapper.html'>makeUndersampleWrapper</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># using the direct parameter of the SVM (which is already defined in the learner)</span>
<span class='no'>lrn</span> <span class='kw'>=</span> <span class='fu'>makeWeightedClassesWrapper</span>(<span class='st'>"classif.ksvm"</span>, <span class='kw'>wcw.weight</span> <span class='kw'>=</span> <span class='fl'>0.01</span>)
<span class='no'>res</span> <span class='kw'>=</span> <span class='fu'><a href='resample.html'>holdout</a></span>(<span class='no'>lrn</span>, <span class='no'>sonar.task</span>)
<span class='fu'>print</span>(<span class='fu'><a href='calculateConfusionMatrix.html'>calculateConfusionMatrix</a></span>(<span class='no'>res</span>$<span class='no'>pred</span>))

<span class='co'># using the observation weights of logreg</span>
<span class='no'>lrn</span> <span class='kw'>=</span> <span class='fu'>makeWeightedClassesWrapper</span>(<span class='st'>"classif.logreg"</span>, <span class='kw'>wcw.weight</span> <span class='kw'>=</span> <span class='fl'>0.01</span>)
<span class='no'>res</span> <span class='kw'>=</span> <span class='fu'><a href='resample.html'>holdout</a></span>(<span class='no'>lrn</span>, <span class='no'>sonar.task</span>)
<span class='fu'>print</span>(<span class='fu'><a href='calculateConfusionMatrix.html'>calculateConfusionMatrix</a></span>(<span class='no'>res</span>$<span class='no'>pred</span>))

<span class='co'># tuning the imbalancy param and the SVM param in one go</span>
<span class='no'>lrn</span> <span class='kw'>=</span> <span class='fu'>makeWeightedClassesWrapper</span>(<span class='st'>"classif.ksvm"</span>, <span class='kw'>wcw.param</span> <span class='kw'>=</span> <span class='st'>"class.weights"</span>)
<span class='no'>ps</span> <span class='kw'>=</span> <span class='fu'>makeParamSet</span>(
  <span class='fu'>makeNumericParam</span>(<span class='st'>"wcw.weight"</span>, <span class='kw'>lower</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='fl'>10</span>),
  <span class='fu'>makeNumericParam</span>(<span class='st'>"C"</span>, <span class='kw'>lower</span> <span class='kw'>=</span> -<span class='fl'>12</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='fl'>12</span>, <span class='kw'>trafo</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fl'>2</span>^<span class='no'>x</span>),
  <span class='fu'>makeNumericParam</span>(<span class='st'>"sigma"</span>, <span class='kw'>lower</span> <span class='kw'>=</span> -<span class='fl'>12</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='fl'>12</span>, <span class='kw'>trafo</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fl'>2</span>^<span class='no'>x</span>)
)
<span class='no'>ctrl</span> <span class='kw'>=</span> <span class='fu'><a href='makeTuneControlRandom.html'>makeTuneControlRandom</a></span>(<span class='kw'>maxit</span> <span class='kw'>=</span> <span class='fl'>3L</span>)
<span class='no'>rdesc</span> <span class='kw'>=</span> <span class='fu'><a href='makeResampleDesc.html'>makeResampleDesc</a></span>(<span class='st'>"CV"</span>, <span class='kw'>iters</span> <span class='kw'>=</span> <span class='fl'>2L</span>, <span class='kw'>stratify</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>res</span> <span class='kw'>=</span> <span class='fu'><a href='tuneParams.html'>tuneParams</a></span>(<span class='no'>lrn</span>, <span class='no'>sonar.task</span>, <span class='no'>rdesc</span>, <span class='kw'>par.set</span> <span class='kw'>=</span> <span class='no'>ps</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>)
<span class='fu'>print</span>(<span class='no'>res</span>)
<span class='fu'>print</span>(<span class='no'>res</span>$<span class='no'>opt.path</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
