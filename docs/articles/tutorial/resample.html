<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h2>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level2">
<h2 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h2>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    25.8803576</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    20.4489920</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    24.7479171</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=23.6924223</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=23.6924223</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0371785</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##      23.69242</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 25.88036</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 20.44899</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 24.74792</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.2619048   0.2000000   0.2962963   0.0180000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.3333333   0.3750000   0.3076923   0.0140000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.1904762   0.2941176   0.1200000   0.0150000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.2142857   0.3181818   0.1000000   0.0150000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.1666667   0.3333333   0.0740741   0.0160000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.2333333,fpr.test.mean=0.3041266,fnr.test.mean=0.1796125,timetrain.test.mean=0.0156000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.2333333,fpr.test.mean=0.3041266,fnr.test.mean=0.1796125,timetrain.test.mean=0.0156000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.136825</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.2333333,fpr.test.mean=0.3041266,fnr.test.mean=0.1796125,timetrain.test.mean=0.0156000,ber.test.mean=0.2418695,timepredict.test.mean=0.0044000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.136825</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.2619048,fpr.test.mean=0.2023810,fnr.test.mean=0.3251665,timetrain.test.mean=0.0160000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.127621</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h2>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level3">
<h3 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h3>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1 152     M        R    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2 143     M        M    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3 149     M        M    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 126     M        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5   2     R        M    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6 170     M        R    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1 152     M        R    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2 143     M        M    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3 149     M        M    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4 126     M        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5   2     R        M    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6 170     M        R    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1 152     M        R    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2 143     M        M    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3 149     M        M    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 126     M        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5   2     R        M    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6 170     M        R    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] M M M M R M</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] R M M M M R</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0128324</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.01</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 80   80 versicolor versicolor</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 34   34     setosa     setosa</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 90   90 versicolor versicolor</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 107 107  virginica  virginica</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 52   52 versicolor versicolor</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 139 139  virginica  virginica</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 110 110  virginica  virginica</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 9     9     setosa     setosa</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 75   75 versicolor versicolor</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 137 137  virginica  virginica</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 27   27     setosa     setosa</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 1     1     setosa     setosa</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level3">
<h3 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h3>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level3">
<h3 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h3>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##      mpg cyl     disp       hp     drat       wt     qsec    vs    am</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 19.575   6 202.6500 112.0000 3.415000 3.183750 18.75500 0.750 0.250</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 15.200   8 335.4889 191.1111 3.126667 3.912667 17.03222 0.000 0.000</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 27.125   4  99.3250  79.6250 4.202500 2.246875 19.20000 0.875 0.875</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##    gear carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 3.500  2.5</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 3.000  3.0</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 4.125  1.5</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg      cyl     disp       hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 14.65000 8.000000 379.0000 242.3333 3.466667 4.102500 16.15500 0.0000000</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 23.19167 4.833333 130.4667 101.5833 3.933333 2.611083 18.50167 0.7500000</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 17.26667 7.333333 258.8667 155.0000 2.966667 3.753333 18.40667 0.3333333</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1 0.3333333 3.666667 4.333333</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2 0.5833333 4.083333 2.750000</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3 0.0000000 3.000000 2.333333</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##        mpg cyl     disp       hp     drat       wt     qsec  vs        am</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 17.20000 7.6 303.1600 153.0000 3.042000 3.478000 17.72600 0.2 0.0000000</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 14.25714 8.0 397.7143 238.4286 3.315714 4.310571 16.45857 0.0 0.2857143</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 24.99000 4.6 122.5600 101.1000 3.944000 2.520800 18.24000 0.7 0.7000000</a>
<a class="sourceLine" id="cb14-38" data-line-number="38">##       gear     carb</a>
<a class="sourceLine" id="cb14-39" data-line-number="39">## 1 3.000000 2.000000</a>
<a class="sourceLine" id="cb14-40" data-line-number="40">## 2 3.571429 4.285714</a>
<a class="sourceLine" id="cb14-41" data-line-number="41">## 3 4.200000 2.500000</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim      zn    indus chas      nox       rm      age     dis    rad</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 1910.355 1712.27 4743.359    0 3996.159 18204.16 3843.891 3346.82 555.86</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 3458.535 4125.755 1004.388 12519.48</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##       crim      zn    indus chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 3728.344 996.165 4185.147    0 3040.299 14076.71 3219.772 3311.369</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##        rad     tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 564.6802 643.475 2268.947 466.9926 11257.48</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim       zn    indus     chas      nox    rm   age      dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 6538.645 5559.765 7804.397 56.13893 7694.341 13825 901.2 1386.968</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##        rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1 67.43462 1202.194 568.1059 0 15333.73</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1]  33  93 313 444 364 420 327 208  60 270 119 242 160 107 462 492 114</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18] 221 262 213 299 141 360 403  71 473 423  66 339 243 481  50  18  61</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35]   2 361 218  17 401 191 460 349  76 372 222 407 140 305  20 318 201</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52] 476 436 220 261  13 120 182 344 165 163  52  85 233 328 474 175  43</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 457 387 477 288 274 345 214 340 316 187 198 405   6 159  57 118 142</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86] 448 178 496  58 298 266 226 148 204 250  83 382 239 428 136 162 146</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103] 363 365 273 110 413 228 238   4 337 466 246 279 307 212 224 304  37</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120]  12   5 459 417 394 145 186 134  59 461 312 464 180 117  26 355 501</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 231 103 384  49 437 297 455   9  94 320 471  99 230 454 157 133 487</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154]  30 415 402 388 440 433 442 227 286 435 331 284 432 378 150 406 249</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171]  36 484 173 151 278 411  48 390 277 352 441 179 225 373 166 272 215</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188] 245 351 183  53 324  74 358  78 101 295  68 458  69 422 493 203 348</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205] 115  19 254  21 404 252 377  63 452 168 429 294 505 147 366 479  41</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222]  98 237 498 235 229  28  25 206 380  86 314 177  62 427 257 194  72</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239] 346  80 123 291  34 196 434 164  92  70 308  89 268 410 236 205 139</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256] 172 130 256 381 494 105 296 247 343  96 207 347  46 129 143 263 467</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273] 430 326 383 241 106 253  88 293 370 409 211 468 135 126 310 391  23</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290] 271 153  27 465  31 446  56 113 267 137 475  79 497 223 376 374 485</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307] 350 108 265 197 255 368 269 209 158 397 325 138  77 445  81 161 362</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 418 156 167 217 259 453 506 321 202 283 144 195 124 302  51</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 170 408 313 364 193 327 149 369 499 462 114 221 299  75 502 360 188</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18] 504 473 423 386  66 243 481 122  18 244   2 290   3 276 401 379 482</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 489 460  76  32 407 140 305  20 491 318  14 303 500  24 189 436 220</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52] 261 120 200 344  52 233 474 210 175 292  43 457 387 181 477 274 214</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69] 309 341 174 176 405  57 449 118  97 315 463 287 178 496  95  58 132</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86] 298 148 204 392 456  83 382 239   7 162 399 146 311 363 365 131 110</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 228  15 395 466 246 330 279  42 128  16  29   5  55 186 461 338 393</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120] 275 300  11 199 180 116 117  26 501 111 231 232 103 384 483 443 185</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137] 171  49 258 447 104 155 334 320 471  99 230  44 495 450 152 133 248</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154]  30 112 415 388 440 433 435 333  64 331  73 354 432 378 406 412 154</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 173 278  67 426 385 469 356 281 390 441 179 478 373 490 166 414 272</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188] 190 245 351  53 324  74 358 357 480 264  68  69  45 493 451 203 348</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205] 486 254 323 342 329 252 377 359 184 371 452 168 429 100 147 366 280</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222] 479 237 498 235 229  28  25  54  86 314  62 427   8  91 438  82  35</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239]  10 317 109 346 488  80 123  34 196 472 434 164  92 353 439 236 205</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 398 234 139 503  87 127 282 400 105 121 296 389 260 332 207  47 289</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273]  84 263  38 375 421 219 169 293 370  65 211 468 135 192 126  22  23</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290] 271 153 419  27  31 446 470 319 424 240 113  39  40 267  90 416 475</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307] 497 223 335 396 374 350 108 336 197 368 367 425 397 102  81 306 161</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 362   1 125 251 156 216 217 431 322 453 506 301 124 285</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1] 170 408  33  93 444 193 420 149 369 208  60 270 499 119 242 160 107</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18] 492 262 213 141  75 502 403  71 188 504 386 339  50 122 244  61 290</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35]   3 361 218  17 276 379 482 191 489 349 372 222  32 491  14 201 303</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52] 500  24 189 476  13 200 182 165 163  85 328 210 292 181 288 345 309</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 341 174 340 316 187 176 198   6 159 449  97 315 463 142 448 287  95</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86] 132 266 226 392 456 250 428 136   7 399 311 131 273 413  15 238   4</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103] 395 337 330  42 307 128 212 224 304  37  16  29  12  55 459 417 394</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120] 145 134  59 338 312 393 275 300  11 199 464 116 355 111 232 483 443</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137] 185 171 258 447 104 437 297 155 334 455   9  94 454  44 495 450 152</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 157 487 248 112 402 442 227 286 333  64  73 354 284 150 412 249 154</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171]  36 484 151  67 426 411  48 385 469 356 281 277 352 225 478 490 414</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188] 215 190 183 357 480  78 264 101 295 458 422  45 451 115 486  19  21</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205] 404 323 342 329 359 184 371  63 100 294 505 280  41  98  54 206 380</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222] 177   8 257  91 438  82 194  35  72  10 317 109 488 291 472  70 308</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239]  89 268 410 353 439 398 234 503  87 127 282 172 130 400 256 381 494</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256] 121 247 389 260 343 332  96  47 289 347  46  84 129 143  38 467 430</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273] 326 383 375 421 219 169 241 106 253  88 409  65 192 310  22 391 419</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 465  56 470 319 424 240  39  40 137  90 416  79 335 376 396 485 336</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307] 265 255 269 209 158 367 425 325 102 138  77 445 306 418   1 125 251</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324] 167 216 431 259 322 301 321 202 283 144 195 302 285  51</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   1   3   7   8  10  11  14  15  16  22  24  29  32  35  38  39  40</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  42  44  45  47  54  55  64  65  67  73  75  82  84  87  90  91  95</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35]  97 100 102 104 109 111 112 116 121 122 125 127 128 131 132 149 152</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 154 155 169 170 171 174 176 181 184 185 188 189 190 192 193 199 200</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 210 216 219 232 234 240 244 248 251 258 260 264 275 276 280 281 282</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 285 287 289 290 292 300 301 303 306 309 311 315 317 319 322 323 329</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 330 332 333 334 335 336 338 341 342 353 354 356 357 359 367 369 371</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 375 379 385 386 389 392 393 395 396 398 399 400 408 412 414 416 419</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 421 424 425 426 431 438 439 443 447 449 450 451 456 463 469 470 472</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 478 480 482 483 486 488 489 490 491 495 499 500 502 503 504</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   4   6   9  12  13  17  19  21  33  36  37  41  46  48  50  51  56</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  59  60  61  63  70  71  72  77  78  79  85  88  89  93  94  96  98</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35] 101 106 107 115 119 129 130 134 136 137 138 141 142 143 144 145 150</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 151 157 158 159 160 163 165 167 172 177 182 183 187 191 194 195 198</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 201 202 206 208 209 212 213 215 218 222 224 225 226 227 238 241 242</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 247 249 250 253 255 256 257 259 262 265 266 268 269 270 273 277 283</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 284 286 288 291 294 295 297 302 304 307 308 310 312 316 321 325 326</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 328 337 339 340 343 345 347 349 352 355 361 372 376 380 381 383 391</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 394 402 403 404 409 410 411 413 417 418 420 422 428 430 437 442 444</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 445 448 454 455 458 459 464 465 467 476 484 485 487 492 494 505</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   2   5  18  20  23  25  26  27  28  30  31  34  43  49  52  53  57</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  58  62  66  68  69  74  76  80  81  83  86  92  99 103 105 108 110</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35] 113 114 117 118 120 123 124 126 133 135 139 140 146 147 148 153 156</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 161 162 164 166 168 173 175 178 179 180 186 196 197 203 204 205 207</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 211 214 217 220 221 223 228 229 230 231 233 235 236 237 239 243 245</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 246 252 254 261 263 267 271 272 274 278 279 293 296 298 299 305 313</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 314 318 320 324 327 331 344 346 348 350 351 358 360 362 363 364 365</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 366 368 370 373 374 377 378 382 384 387 388 390 397 401 405 406 407</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 415 423 427 429 432 433 434 435 436 440 441 446 452 453 457 460 461</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 462 466 468 471 473 474 475 477 479 481 493 496 497 498 501 506</a></code></pre></div>
</div>
</div>
<div id="stratification-blocking-and-grouping" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-blocking-and-grouping" class="anchor"></a>Stratification, Blocking and Grouping</h2>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
<li><p><em>Grouping</em> means that the folds are composed out of a factor vector given by the user. In this setting no repetitions are possible as all folds are predefined. The approach can also be used in a nested resampling setting. Note the subtle but important difference to “Blocking”: In “Blocking” factor levels are respected when splitting into train and test (e.g. the test set could be composed out of two given factor levels) whereas in “Grouping” the folds will strictly follow the factor level grouping (meaning that the test set will always only consist of one factor level).</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h3>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0198746</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.212251</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h3>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=21.7874644</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0341437</a></code></pre></div>
</div>
<div id="blocking-cv-with-flexible-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#blocking-cv-with-flexible-predefined-indices" class="anchor"></a>Blocking: CV with flexible predefined indices</h3>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> factor when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
<p>When performing a simple “CV” resampling and inspecting the result, we see that the training indices in fold 1 correspond to the specified grouping set in <code>blocking</code> in the task. To initiate this method, we need to set <code>blocking.cv = TRUE</code> when creating the resample description object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">blocking.cv =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Measures:             mmce</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## [Resample] iter 1:    0.0500000</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">## [Resample] iter 2:    0.0000000</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">## [Resample] iter 3:    0.0500000</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb20-9" data-line-number="9">## Aggregated Result: mmce.test.mean=0.0333333</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">## [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  61  62  63  64</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">## [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">## [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">## [86] 116 117 118 119 120</a></code></pre></div>
<p>However, please note the effects of this method: The created folds will not have the same size! Here, Fold 1 has a 120/30 split while the other two folds have a 90/60 split.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">## [1] 90</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb21-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">## [1] 90</a></code></pre></div>
<p>This is caused by the fact that we supplied five groups that must belong together but only used a three fold resampling strategy here.</p>
</div>
<div id="grouping-cv-with-fixed-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-cv-with-fixed-predefined-indices" class="anchor"></a>Grouping: CV with fixed predefined indices</h3>
<p>There is a second way of using predefined indices in resampling in <code>mlr</code>: Constructing the folds based on the supplied indices in <code>blocking</code>. We refer to this method here as “grouping” to distinguish it from “blocking”. This method is more restrictive in the way that it will always use the number of levels supplied via <code>blocking</code> as the number of folds. To use this method, we need to set <code>fixed = TRUE</code> instead of <code>blocking.cv</code> when creating the resampling description object.</p>
<p>We can leave out the <code>iters</code> argument, as it will be set internally to the number of supplied factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">## Warning in instantiateResampleInstance.CVDesc(desc, size, task): Adjusting</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">## levels to match number of blocking levels.</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">## Measures:             mmce</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">## [Resample] iter 1:    0.0000000</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## [Resample] iter 2:    0.1000000</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">## [Resample] iter 3:    0.0000000</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">## [Resample] iter 4:    0.1000000</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">## [Resample] iter 5:    0.0000000</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">## Aggregated Result: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">## </a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb22-16" data-line-number="16">##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  61  62  63  64</a>
<a class="sourceLine" id="cb22-18" data-line-number="18">##  [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb22-19" data-line-number="19">##  [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb22-20" data-line-number="20">##  [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb22-21" data-line-number="21">##  [86] 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132</a>
<a class="sourceLine" id="cb22-22" data-line-number="22">## [103] 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149</a>
<a class="sourceLine" id="cb22-23" data-line-number="23">## [120] 150</a></code></pre></div>
<p>You can see that we automatically created five folds in which the test set always corresponds to one factor level.</p>
<p>Doing it this way also means that we cannot do repeated CV because there is no way to create multiple shuffled folds of this fixed arrangement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## [1] 120</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">## [1] 120</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb23-11" data-line-number="11">## [[4]]</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">## [1] 120</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb23-14" data-line-number="14">## [[5]]</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">## [1] 120</a></code></pre></div>
<p>However, this method can also be used in nested resampling settings (e.g. in hyperparameter tuning). In the inner level, the factor levels are honored and the function simply creates one fold less than in the outer level.</p>
<p>Please note that the <code>iters</code> argument has no effect in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> if <code>fixed = TRUE</code>. The number of folds will be automatically set based on the supplied number of factor levels via <code>blocking</code>. In the inner level, the number of folds will simply be one less than in the outer level.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># test fixed in nested resampling</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">ctrl &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">ps &lt;-<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"nu"</span>, <span class="dt">lower =</span> <span class="dv">2</span>, <span class="dt">upper =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">inner =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">outer =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">tune_wrapper =<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span>(lrn, <span class="dt">resampling =</span> inner, <span class="dt">par.set =</span> ps,</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-9" data-line-number="9"></a>
<a class="sourceLine" id="cb24-10" data-line-number="10">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(tune_wrapper, task, outer, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">  <span class="dt">extract =</span> getTuneResult)</a></code></pre></div>
<p>To check on the inner resampling indices, you can call <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices(inner = TRUE)</a></code>. You can see that for every outer fold (List of 5), four inner folds were created that respect the grouping supplied via the <code>blocking</code> argument.</p>
<p>Of course you can also use a normal random sampling “CV” description in the inner level by just setting <code>fixed = FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">str</span>(<span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(p, <span class="dt">inner =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">## List of 5</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">##   .. ..$ : int [1:90] 24 115 60 116 51 62 79 119 88 57 ...</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">##   .. ..$ : int [1:90] 2 115 60 116 104 51 41 79 10 119 ...</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">##   .. ..$ : int [1:90] 2 24 115 60 104 62 41 79 10 39 ...</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">##   .. ..$ : int [1:90] 2 24 116 104 51 62 41 10 119 39 ...</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">##   .. ..$ : int [1:30] 2 4 7 9 10 11 20 21 25 26 ...</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">##   .. ..$ : int [1:30] 1 18 24 30 31 32 34 35 43 44 ...</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">##   .. ..$ : int [1:30] 5 8 12 13 15 17 27 40 42 47 ...</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">##   .. ..$ : int [1:30] 3 6 14 16 19 22 23 28 33 45 ...</a>
<a class="sourceLine" id="cb25-14" data-line-number="14">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-15" data-line-number="15">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">##   .. ..$ : int [1:90] 52 65 86 27 68 92 79 96 116 101 ...</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">##   .. ..$ : int [1:90] 69 52 45 86 27 68 92 79 96 33 ...</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">##   .. ..$ : int [1:90] 69 52 65 45 68 79 96 116 101 16 ...</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">##   .. ..$ : int [1:90] 69 65 45 86 27 92 116 101 16 33 ...</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">##   .. ..$ : int [1:30] 1 17 22 28 29 30 31 32 40 45 ...</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">##   .. ..$ : int [1:30] 4 7 12 13 15 16 25 37 39 48 ...</a>
<a class="sourceLine" id="cb25-23" data-line-number="23">##   .. ..$ : int [1:30] 2 3 6 8 9 11 18 19 23 24 ...</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">##   .. ..$ : int [1:30] 5 10 14 20 21 26 41 42 43 44 ...</a>
<a class="sourceLine" id="cb25-25" data-line-number="25">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-26" data-line-number="26">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">##   .. ..$ : int [1:90] 88 13 83 12 78 97 92 60 80 42 ...</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">##   .. ..$ : int [1:90] 88 39 12 78 92 104 60 24 80 54 ...</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">##   .. ..$ : int [1:90] 39 13 83 12 78 97 104 60 24 80 ...</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">##   .. ..$ : int [1:90] 88 39 13 83 97 92 104 24 54 42 ...</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-32" data-line-number="32">##   .. ..$ : int [1:30] 2 4 7 8 9 11 17 18 24 25 ...</a>
<a class="sourceLine" id="cb25-33" data-line-number="33">##   .. ..$ : int [1:30] 6 10 13 20 22 27 41 42 43 44 ...</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   .. ..$ : int [1:30] 1 15 23 29 30 31 33 34 40 45 ...</a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##   .. ..$ : int [1:30] 3 5 12 14 16 19 21 26 32 46 ...</a>
<a class="sourceLine" id="cb25-36" data-line-number="36">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-37" data-line-number="37">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-38" data-line-number="38">##   .. ..$ : int [1:90] 45 35 75 84 106 67 31 23 50 86 ...</a>
<a class="sourceLine" id="cb25-39" data-line-number="39">##   .. ..$ : int [1:90] 45 35 75 106 67 38 23 50 21 86 ...</a>
<a class="sourceLine" id="cb25-40" data-line-number="40">##   .. ..$ : int [1:90] 84 67 31 38 23 50 21 86 65 94 ...</a>
<a class="sourceLine" id="cb25-41" data-line-number="41">##   .. ..$ : int [1:90] 45 35 75 84 106 31 38 21 64 11 ...</a>
<a class="sourceLine" id="cb25-42" data-line-number="42">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-43" data-line-number="43">##   .. ..$ : int [1:30] 1 15 21 25 26 27 29 30 33 38 ...</a>
<a class="sourceLine" id="cb25-44" data-line-number="44">##   .. ..$ : int [1:30] 3 6 8 9 12 14 22 31 32 42 ...</a>
<a class="sourceLine" id="cb25-45" data-line-number="45">##   .. ..$ : int [1:30] 5 7 11 18 20 24 34 35 36 37 ...</a>
<a class="sourceLine" id="cb25-46" data-line-number="46">##   .. ..$ : int [1:30] 2 4 10 13 16 17 19 23 28 39 ...</a>
<a class="sourceLine" id="cb25-47" data-line-number="47">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-48" data-line-number="48">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-49" data-line-number="49">##   .. ..$ : int [1:90] 117 114 13 86 29 18 49 76 105 92 ...</a>
<a class="sourceLine" id="cb25-50" data-line-number="50">##   .. ..$ : int [1:90] 13 29 49 59 76 105 92 4 115 110 ...</a>
<a class="sourceLine" id="cb25-51" data-line-number="51">##   .. ..$ : int [1:90] 117 114 13 86 29 18 59 105 4 115 ...</a>
<a class="sourceLine" id="cb25-52" data-line-number="52">##   .. ..$ : int [1:90] 117 114 86 18 49 59 76 92 120 32 ...</a>
<a class="sourceLine" id="cb25-53" data-line-number="53">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-54" data-line-number="54">##   .. ..$ : int [1:30] 1 3 7 9 10 12 21 22 27 28 ...</a>
<a class="sourceLine" id="cb25-55" data-line-number="55">##   .. ..$ : int [1:30] 2 5 15 18 20 23 25 30 33 45 ...</a>
<a class="sourceLine" id="cb25-56" data-line-number="56">##   .. ..$ : int [1:30] 6 11 16 24 26 31 41 42 43 44 ...</a>
<a class="sourceLine" id="cb25-57" data-line-number="57">##   .. ..$ : int [1:30] 4 8 13 14 17 19 29 38 40 47 ...</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level2">
<h2 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h2>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## List of 6</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">##  $ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">##  $ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">##  $ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">##  $ iters      : int 3</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">##  $ predict    : chr "test"</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##  $ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb26-16" data-line-number="16"></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">## List of 8</a>
<a class="sourceLine" id="cb26-19" data-line-number="19">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">##  $ fixed        : logi FALSE</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">##  $ blocking.cv  : logi FALSE</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb27-8" data-line-number="8"></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-17" data-line-number="17">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-18" data-line-number="18">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-20" data-line-number="20">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   ..$ : int [1:100] 85 83 80 8 111 38 142 94 108 15 ...</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">##   ..$ : int [1:100] 85 83 79 111 38 142 148 108 11 40 ...</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">##   ..$ : int [1:100] 80 8 79 94 148 15 69 84 71 23 ...</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">##   ..$ : int [1:50] 7 10 13 16 19 20 23 24 27 29 ...</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">##   ..$ : int [1:50] 3 4 5 6 8 12 14 15 17 21 ...</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">##   ..$ : int [1:50] 1 2 9 11 18 22 26 31 33 35 ...</a>
<a class="sourceLine" id="cb27-28" data-line-number="28">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-29" data-line-number="29">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-30" data-line-number="30"></a>
<a class="sourceLine" id="cb27-31" data-line-number="31"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb27-32" data-line-number="32">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb27-33" data-line-number="33"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-34" data-line-number="34">## List of 5</a>
<a class="sourceLine" id="cb27-35" data-line-number="35">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-36" data-line-number="36">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-37" data-line-number="37">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-38" data-line-number="38">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-39" data-line-number="39">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-40" data-line-number="40">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-41" data-line-number="41">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-42" data-line-number="42">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-43" data-line-number="43">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-44" data-line-number="44">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-45" data-line-number="45">##   ..$ : int [1:100] 55 29 15 40 112 134 107 72 65 132 ...</a>
<a class="sourceLine" id="cb27-46" data-line-number="46">##   ..$ : int [1:100] 109 104 75 112 107 110 65 132 36 52 ...</a>
<a class="sourceLine" id="cb27-47" data-line-number="47">##   ..$ : int [1:100] 55 109 104 29 15 75 40 134 110 72 ...</a>
<a class="sourceLine" id="cb27-48" data-line-number="48">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-49" data-line-number="49">##   ..$ : int [1:50] 3 5 9 14 17 18 19 22 23 24 ...</a>
<a class="sourceLine" id="cb27-50" data-line-number="50">##   ..$ : int [1:50] 4 10 11 12 13 15 16 21 29 34 ...</a>
<a class="sourceLine" id="cb27-51" data-line-number="51">##   ..$ : int [1:50] 1 2 6 7 8 20 25 30 37 38 ...</a>
<a class="sourceLine" id="cb27-52" data-line-number="52">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-53" data-line-number="53">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-54" data-line-number="54"></a>
<a class="sourceLine" id="cb27-55" data-line-number="55"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb27-56" data-line-number="56">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb27-57" data-line-number="57">##   [1]  55 109 104  29  15  75  40 134 110  72  36  52  63 143  27 102  47</a>
<a class="sourceLine" id="cb27-58" data-line-number="58">##  [18]  33 144  68  84 145 124  98  62   9 140  95  85  96  10  22 150  34</a>
<a class="sourceLine" id="cb27-59" data-line-number="59">##  [35]  14  97 139 129  23  67  50  26  41  39 136  83  93  24 103  21 128</a>
<a class="sourceLine" id="cb27-60" data-line-number="60">##  [52]  12 108  13  17 126   5 120  16   4  73 127   3  87  88 100  81  32</a>
<a class="sourceLine" id="cb27-61" data-line-number="61">##  [69]  11 116  35  74 148  48  45 137 130  69  86 111 122 149  31  54  56</a>
<a class="sourceLine" id="cb27-62" data-line-number="62">##  [86] 114 125  42  78  46 115  19 123  28  64  92  77 118  18 138</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-9" data-line-number="9">##           0.02</a>
<a class="sourceLine" id="cb28-10" data-line-number="10"></a>
<a class="sourceLine" id="cb28-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-13" data-line-number="13">##           0.06</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h2>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"></a>
<a class="sourceLine" id="cb30-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">## &lt;bytecode: 0x9cc32c8&gt;</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb30-10" data-line-number="10"></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb30-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb30-14" data-line-number="14"></a>
<a class="sourceLine" id="cb30-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb30-18" data-line-number="18">## &lt;bytecode: 0x128319f8&gt;</a>
<a class="sourceLine" id="cb30-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level4">
<h4 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h4>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb31-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb31-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb31-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb31-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb31-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb31-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb31-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb31-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb31-14" data-line-number="14"></a>
<a class="sourceLine" id="cb31-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb31-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb31-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb31-19" data-line-number="19">## [Resample] iter 1:    23.886646523.886646523.886646523.8866465</a>
<a class="sourceLine" id="cb31-20" data-line-number="20">## [Resample] iter 2:    17.267637017.267637017.267637017.2676370</a>
<a class="sourceLine" id="cb31-21" data-line-number="21">## [Resample] iter 3:    32.076709732.076709732.076709732.0767097</a>
<a class="sourceLine" id="cb31-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb31-23" data-line-number="23">## Aggregated Result: mse.test.mean=24.4103310,mse.test.median=23.8866465,mse.test.min=17.2676370,mse.test.max=32.0767097</a>
<a class="sourceLine" id="cb31-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb31-25" data-line-number="25"></a>
<a class="sourceLine" id="cb31-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb31-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb31-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb31-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb31-30" data-line-number="30">## Aggr perf: mse.test.mean=24.4103310,mse.test.median=23.8866465,mse.test.min=17.2676370,mse.test.max=32.0767097</a>
<a class="sourceLine" id="cb31-31" data-line-number="31">## Runtime: 0.0256996</a>
<a class="sourceLine" id="cb31-32" data-line-number="32"></a>
<a class="sourceLine" id="cb31-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb31-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb31-35" data-line-number="35">##        24.41033        23.88665        17.26764        32.07671</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level3">
<h3 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h3>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">## [Resample] iter 1:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb32-7" data-line-number="7">## [Resample] iter 2:    0.0300000    0.0800000</a>
<a class="sourceLine" id="cb32-8" data-line-number="8">## [Resample] iter 3:    0.0400000    0.0600000</a>
<a class="sourceLine" id="cb32-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb32-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0666667,mmce.train.mean=0.0333333</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb32-12" data-line-number="12"></a>
<a class="sourceLine" id="cb32-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">## 1    1 0.03 0.03</a>
<a class="sourceLine" id="cb32-16" data-line-number="16">## 2    2 0.03 0.03</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">## 3    3 0.04 0.04</a>
<a class="sourceLine" id="cb32-18" data-line-number="18"></a>
<a class="sourceLine" id="cb32-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb32-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb32-21" data-line-number="21">##      0.06666667      0.03333333</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level3">
<h3 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h3>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb33-7" data-line-number="7"></a>
<a class="sourceLine" id="cb33-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb33-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb33-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb33-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb33-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb33-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb33-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb33-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb33-17" data-line-number="17"></a>
<a class="sourceLine" id="cb33-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb33-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb33-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb33-21" data-line-number="21">##   iter       mmce       mmce       mmce</a>
<a class="sourceLine" id="cb33-22" data-line-number="22">## 1    1 0.01333333 0.01333333 0.01333333</a>
<a class="sourceLine" id="cb33-23" data-line-number="23">## 2    2 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb33-24" data-line-number="24">## 3    3 0.01333333 0.01333333 0.01333333</a>
<a class="sourceLine" id="cb33-25" data-line-number="25">## 4    4 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb33-26" data-line-number="26">## 5    5 0.03333333 0.03333333 0.03333333</a>
<a class="sourceLine" id="cb33-27" data-line-number="27">## 6    6 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb33-28" data-line-number="28"></a>
<a class="sourceLine" id="cb33-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb33-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb33-32" data-line-number="32">##     0.05596030     0.04616158     0.04712637</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h2>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">## [Resample] iter 1:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">## [Resample] iter 2:    0.0600000 0.0517544</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">## [Resample] iter 3:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb34-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0172515</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb34-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0172515</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">## Runtime: 0.0250146</a>
<a class="sourceLine" id="cb34-15" data-line-number="15"></a>
<a class="sourceLine" id="cb34-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb34-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb34-19" data-line-number="19">## [Resample] iter 1:    18.6334100  2.9270325   26.8916892  3.6793716</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">## [Resample] iter 2:    22.1731388  3.3832644   19.7939735  3.1517663</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">## [Resample] iter 3:    22.9573570  3.4117877   24.0798602  3.5285592</a>
<a class="sourceLine" id="cb34-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb34-23" data-line-number="23">## Aggregated Result: mse.b632plus=22.7759371,mae.b632plus=3.3830134</a>
<a class="sourceLine" id="cb34-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb34-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb34-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb34-28" data-line-number="28">## Aggr perf: mse.b632plus=22.7759371,mae.b632plus=3.3830134</a>
<a class="sourceLine" id="cb34-29" data-line-number="29">## Runtime: 0.0380933</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
