<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Handling of Spatial Data • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">mlr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/mlr.html">Get Started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learners.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configuring.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/imbalanced_classification_problems.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve_analysis.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperparameter_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extend
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/custom_learners.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/custom_measures.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/implemented_measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form" role="search" method="GET" action="../../search.html">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search" id="search" name="search">
</div>
        <button type="submit" class="btn btn-default">
          <i class="glyphicon glyphicon-search"></i>
        </button>
      </form>
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Handling of Spatial Data</h1>
                        <h4 class="author">Patrick Schratz</h4>
            
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Spatial data is different from non-spatial data by having a spatial reference information attached to each observation. This information is usually stored as coordinates, often named <code>x</code> and <code>y</code>. Coordinates are either stored in UTM (Universal Transverse Mercator) or in latitude/longitude format.</p>
<p>Treating spatial data sets like non-spatial ones leads to overoptimistic results in predictive accuracy of models (<a href="https://www.nat-hazards-earth-syst-sci.net/5/853/2005/">Brenning 2005</a>). This is due to the underlying spatial autocorrelation in the data. Spatial autocorrelation does occur in all spatial data sets. Magnitude varies depending on the characteristics of the data set. The closer observations are located to each other, the more similar they are.</p>
<p>If common validation procedures like cross-validation are applied to such data sets, they assume independence of the observation upfront to provide unbiased estimates. However, this assumption is violated in the spatial case due to spatial autocorrelation. Subsequently, non-spatial cross-validation will fail to provide accurate performance estimates.</p>
<div class="figure">
<img src="img/spatial_cross_validation.png" title="Nested Spatial and Non-Spatial Cross-Validation" alt="Nested Spatial and Non-Spatial Cross-Validation"><p class="caption">Nested Spatial and Non-Spatial Cross-Validation</p>
</div>
<p>By doing a random sampling of the data set (i.e. non-spatial sampling), training and test set data are often located directly next to each other (in geographical space). Hence, the test set will contain observations which are somewhat similar (due to spatial autocorrelation) to observations in the training set. This leads to the effect that the model, which was trained on the training set, performs quite well on the test data because it already knows it to some degree.</p>
<p>To reduce this bias on the resulting predictive accuracy estimate, <a href="https://www.nat-hazards-earth-syst-sci.net/5/853/2005/">Brenning 2005</a> suggested to use spatial partitioning in favor of random partitioning (see Figure 1). Here, spatial clusters are equal to the number of folds chosen. These spatially disjoint subsets of the data introduce a spatial distance between training and test set. This reduces the influence of spatial autocorrelation and subsequently also the overoptimistic predictive accuracy estimates. The example in Figure 1 shows a five-fold nested cross-validation setting and exhibits the difference between spatial and non-spatial partitioning. The nested approach is used when hyperparameter tuning is performed.</p>
</div>
<div id="how-to-use-spatial-partitioning-in-mlr" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-spatial-partitioning-in-mlr" class="anchor"></a>How to use spatial partitioning in mlr</h2>
<p>Spatial partitioning can be used when performing cross-validation. In any [&amp;resample] call you can choose <code>SpCV</code> or <code>RepSpCV</code> to use it. There are some prerequisites for this:</p>
<p>When specifying the <a href="task.md">task</a>, you need to explicitly state that the task is <code>spatial</code> one by setting <code>spatial = TRUE</code>. Next, there need to be two variables named <code>x</code> and <code>y</code> in your data set that store the coordinate information. If this applies, the coordinates will be used for spatial partitioning if <code>SpCV</code> or <code>RepSpCV</code> are selected as resampling strategies.</p>
<p>Also, these variables <strong>will be removed</strong> for any <a href="&amp;train">train()</a> or <a href="&amp;predict">predict()</a> call. This means they will not be used as predictors within the specified learner but only to set up the sampling for the cross-validation task.</p>
<p>Coordinates must be named <code>x</code> and <code>y</code> to be used for spatial partitioning. If named differently and <code>spatial = TRUE</code> was set during task creation, an error will occur.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>The <code>basque</code> data set serves as an example data set for spatial modeling tasks in <code>mlr</code>. The <a href="task.md">task</a> attribute <code>spatial</code> is set to <code>TRUE</code> to indicate that the data set also stores coordinate information.</p>
<p>In this example the “Random Forest” algorithm (package <a href="&amp;ranger::ranger">ranger</a>) is used to model a binomial response variable.</p>
<p>For performance assessment, a repeated spatial cross-validation with 5 folds and 10 repetitions is chosen.</p>
<div id="spatial-cross-validation" class="section level3">
<h3 class="hasAnchor">
<a href="#spatial-cross-validation" class="anchor"></a>Spatial Cross-Validation</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"bc.task.spatial"</span>)
bc.task.spatial</code></pre></div>
<pre><code>## Supervised task: basque
## Type: classif
## Target: diplo01
## Observations: 944
## Features:
##    numerics     factors     ordered functionals 
##           9           2           0           0 
## Missings: FALSE
## Has weights: FALSE
## Has blocking: FALSE
## Is spatial: TRUE
## Classes: 2
##   0   1 
## 720 224 
## Positive class: 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">learner.glm =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.ranger"</span>, <span class="dt">predict.type =</span> <span class="st">"prob"</span>)

resampling =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"SpRepCV"</span>, <span class="dt">fold =</span> <span class="dv">5</span>, <span class="dt">reps =</span> <span class="dv">10</span>)

<span class="kw">set.seed</span>(<span class="dv">123</span>)
out =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="dt">learner =</span> learner.glm, <span class="dt">task =</span> bc.task.spatial,
  <span class="dt">resampling =</span> resampling, <span class="dt">measures =</span> <span class="kw">list</span>(auc))</code></pre></div>
<pre><code>## Resampling: repeated spatial cross-validation</code></pre>
<pre><code>## Measures:             auc</code></pre>
<pre><code>## [Resample] iter 1:    0.8564829</code></pre>
<pre><code>## [Resample] iter 2:    0.8903922</code></pre>
<pre><code>## [Resample] iter 3:    0.8018739</code></pre>
<pre><code>## [Resample] iter 4:    0.8170660</code></pre>
<pre><code>## [Resample] iter 5:    0.8626639</code></pre>
<pre><code>## [Resample] iter 6:    0.8888889</code></pre>
<pre><code>## [Resample] iter 7:    0.9200000</code></pre>
<pre><code>## [Resample] iter 8:    0.8844538</code></pre>
<pre><code>## [Resample] iter 9:    0.7644215</code></pre>
<pre><code>## [Resample] iter 10:   0.7704265</code></pre>
<pre><code>## [Resample] iter 11:   0.8883220</code></pre>
<pre><code>## [Resample] iter 12:   0.8430926</code></pre>
<pre><code>## [Resample] iter 13:   0.7603609</code></pre>
<pre><code>## [Resample] iter 14:   0.7996886</code></pre>
<pre><code>## [Resample] iter 15:   0.9112150</code></pre>
<pre><code>## [Resample] iter 16:   0.8575808</code></pre>
<pre><code>## [Resample] iter 17:   0.8758170</code></pre>
<pre><code>## [Resample] iter 18:   0.9722531</code></pre>
<pre><code>## [Resample] iter 19:   0.7683578</code></pre>
<pre><code>## [Resample] iter 20:   0.7707363</code></pre>
<pre><code>## [Resample] iter 21:   0.8282783</code></pre>
<pre><code>## [Resample] iter 22:   0.8040078</code></pre>
<pre><code>## [Resample] iter 23:   0.8559476</code></pre>
<pre><code>## [Resample] iter 24:   0.8466709</code></pre>
<pre><code>## [Resample] iter 25:   0.8556985</code></pre>
<pre><code>## [Resample] iter 26:   0.9694784</code></pre>
<pre><code>## [Resample] iter 27:   0.8534002</code></pre>
<pre><code>## [Resample] iter 28:   0.8696655</code></pre>
<pre><code>## [Resample] iter 29:   0.7530708</code></pre>
<pre><code>## [Resample] iter 30:   0.7707363</code></pre>
<pre><code>## [Resample] iter 31:   0.7859410</code></pre>
<pre><code>## [Resample] iter 32:   0.8797678</code></pre>
<pre><code>## [Resample] iter 33:   0.7657106</code></pre>
<pre><code>## [Resample] iter 34:   0.8925759</code></pre>
<pre><code>## [Resample] iter 35:   0.9153037</code></pre>
<pre><code>## [Resample] iter 36:   0.8602616</code></pre>
<pre><code>## [Resample] iter 37:   0.8804180</code></pre>
<pre><code>## [Resample] iter 38:   0.7662884</code></pre>
<pre><code>## [Resample] iter 39:   0.7716682</code></pre>
<pre><code>## [Resample] iter 40:   0.9719888</code></pre>
<pre><code>## [Resample] iter 41:   0.7636481</code></pre>
<pre><code>## [Resample] iter 42:   0.7815193</code></pre>
<pre><code>## [Resample] iter 43:   0.9147196</code></pre>
<pre><code>## [Resample] iter 44:   0.8892013</code></pre>
<pre><code>## [Resample] iter 45:   0.8720978</code></pre>
<pre><code>## [Resample] iter 46:   0.8436748</code></pre>
<pre><code>## [Resample] iter 47:   0.7144397</code></pre>
<pre><code>## [Resample] iter 48:   0.7679477</code></pre>
<pre><code>## [Resample] iter 49:   0.8233804</code></pre>
<pre><code>## [Resample] iter 50:   0.7238220</code></pre>
<pre><code>## </code></pre>
<pre><code>## Aggregated Result: auc.test.mean=0.8379085</code></pre>
<pre><code>## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(out$measures.test$auc)</code></pre></div>
<pre><code>## [1] 0.8379085</code></pre>
<p>We can check for the introduced spatial autocorrelation bias here by performing the same modeling task using a non-spatial partitioning setting. To force use non-spatial cross-validation here, variables <code>x</code> and <code>y</code> need to be removed from the data set because they are not used for partitioning when using <code>RepCV</code> and also should not be used as predictors.</p>
<p>Additionally, the <code>spatial</code> task attribute needs to be set to <code>FALSE</code>. <code>mlr</code> tries to be smart by issueing a warning message if it detects variables named <code>x</code> or <code>y</code> in combination with <code>spatial = FALSE</code>. Finally, <code>RepCV</code> is chosen instead of <code>SpRepCV</code>.</p>
</div>
<div id="non-spatial-cross-validation" class="section level3">
<h3 class="hasAnchor">
<a href="#non-spatial-cross-validation" class="anchor"></a>Non-Spatial Cross-Validation</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"bc.task.spatial"</span>)
bc.task.spatial</code></pre></div>
<pre><code>## Supervised task: basque
## Type: classif
## Target: diplo01
## Observations: 944
## Features:
##    numerics     factors     ordered functionals 
##           9           2           0           0 
## Missings: FALSE
## Has weights: FALSE
## Has blocking: FALSE
## Is spatial: TRUE
## Classes: 2
##   0   1 
## 720 224 
## Positive class: 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bc.task.spatial$task.desc$spatial =<span class="st"> </span><span class="ot">FALSE</span>
bc.task.spatial$env$data$x =<span class="st"> </span><span class="ot">NULL</span>
bc.task.spatial$env$data$y =<span class="st"> </span><span class="ot">NULL</span>

learner.glm =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.ranger"</span>, <span class="dt">predict.type =</span> <span class="st">"prob"</span>)

resampling =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"RepCV"</span>, <span class="dt">fold =</span> <span class="dv">5</span>, <span class="dt">reps =</span> <span class="dv">10</span>)

<span class="kw">set.seed</span>(<span class="dv">123</span>)
out =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="dt">learner =</span> learner.glm, <span class="dt">task =</span> bc.task.spatial,
  <span class="dt">resampling =</span> resampling, <span class="dt">measures =</span> <span class="kw">list</span>(auc))</code></pre></div>
<pre><code>## Resampling: repeated cross-validation</code></pre>
<pre><code>## Measures:             auc</code></pre>
<pre><code>## [Resample] iter 1:    0.8967930</code></pre>
<pre><code>## [Resample] iter 2:    0.9045999</code></pre>
<pre><code>## [Resample] iter 3:    0.9294306</code></pre>
<pre><code>## [Resample] iter 4:    0.8802067</code></pre>
<pre><code>## [Resample] iter 5:    0.9297806</code></pre>
<pre><code>## [Resample] iter 6:    0.9167055</code></pre>
<pre><code>## [Resample] iter 7:    0.9145773</code></pre>
<pre><code>## [Resample] iter 8:    0.9190111</code></pre>
<pre><code>## [Resample] iter 9:    0.9230211</code></pre>
<pre><code>## [Resample] iter 10:   0.8920038</code></pre>
<pre><code>## [Resample] iter 11:   0.9174018</code></pre>
<pre><code>## [Resample] iter 12:   0.9216362</code></pre>
<pre><code>## [Resample] iter 13:   0.8649985</code></pre>
<pre><code>## [Resample] iter 14:   0.9400488</code></pre>
<pre><code>## [Resample] iter 15:   0.9335277</code></pre>
<pre><code>## [Resample] iter 16:   0.8901363</code></pre>
<pre><code>## [Resample] iter 17:   0.8874161</code></pre>
<pre><code>## [Resample] iter 18:   0.9116547</code></pre>
<pre><code>## [Resample] iter 19:   0.9056988</code></pre>
<pre><code>## [Resample] iter 20:   0.9353667</code></pre>
<pre><code>## [Resample] iter 21:   0.9007716</code></pre>
<pre><code>## [Resample] iter 22:   0.9178832</code></pre>
<pre><code>## [Resample] iter 23:   0.9260784</code></pre>
<pre><code>## [Resample] iter 24:   0.8679113</code></pre>
<pre><code>## [Resample] iter 25:   0.9532938</code></pre>
<pre><code>## [Resample] iter 26:   0.8807246</code></pre>
<pre><code>## [Resample] iter 27:   0.9007646</code></pre>
<pre><code>## [Resample] iter 28:   0.9112245</code></pre>
<pre><code>## [Resample] iter 29:   0.9021704</code></pre>
<pre><code>## [Resample] iter 30:   0.9442953</code></pre>
<pre><code>## [Resample] iter 31:   0.9243403</code></pre>
<pre><code>## [Resample] iter 32:   0.9407455</code></pre>
<pre><code>## [Resample] iter 33:   0.8723823</code></pre>
<pre><code>## [Resample] iter 34:   0.9146044</code></pre>
<pre><code>## [Resample] iter 35:   0.8980796</code></pre>
<pre><code>## [Resample] iter 36:   0.9012854</code></pre>
<pre><code>## [Resample] iter 37:   0.9103448</code></pre>
<pre><code>## [Resample] iter 38:   0.9683020</code></pre>
<pre><code>## [Resample] iter 39:   0.9169096</code></pre>
<pre><code>## [Resample] iter 40:   0.8891844</code></pre>
<pre><code>## [Resample] iter 41:   0.8992375</code></pre>
<pre><code>## [Resample] iter 42:   0.8888889</code></pre>
<pre><code>## [Resample] iter 43:   0.9168440</code></pre>
<pre><code>## [Resample] iter 44:   0.9027697</code></pre>
<pre><code>## [Resample] iter 45:   0.9038690</code></pre>
<pre><code>## [Resample] iter 46:   0.9262346</code></pre>
<pre><code>## [Resample] iter 47:   0.8470183</code></pre>
<pre><code>## [Resample] iter 48:   0.8931188</code></pre>
<pre><code>## [Resample] iter 49:   0.9615858</code></pre>
<pre><code>## [Resample] iter 50:   0.9296015</code></pre>
<pre><code>## </code></pre>
<pre><code>## Aggregated Result: auc.test.mean=0.9104896</code></pre>
<pre><code>## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(out$measures.test$auc)</code></pre></div>
<pre><code>## [1] 0.9104896</code></pre>
<p>The introduced bias (caused by spatial autocorrelation) in performance in this example is around 0.07 AUROC.</p>
</div>
</div>
<div id="notes" class="section level2">
<h2 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes</h2>
<ul>
<li><p>Usually, coordinates are not used as predictors in spatial modeling. If you insist on using them and also want to perform spatial cross-validation, add them to the data set with a different name than <code>x</code> or <code>y</code>, e.g. <code>x1</code> and <code>y1</code>. That way they will be treated as normal predictors.</p></li>
<li><p>Some models are more affected by spatial autocorrelation than others. In general it can be said that the more flexible a model is, the more it will profit from underlying spatial autocorrelation. Simpler models (e.g. GLM) will show less overoptimistic performance estimates.</p></li>
<li><p>The concept of spatial cross-validation was originally implemented in package <a href="https://pat-s.github.io/sperrorest/index.html">sperrorest</a>. This package comes with even more partitioning options and the ability to visualize the spatial grouping of folds. We plan to integrate more functions from <a href="https://pat-s.github.io/sperrorest/index.html">sperrorest</a> into <code>mlr</code> so stay tuned!</p></li>
<li><p>For more detailed information, see <a href="https://www.nat-hazards-earth-syst-sci.net/5/853/2005/">Brenning 2005</a>, <a href="http://ieeexplore.ieee.org/document/6352393/">Brenning2012</a>, Schratz2018 (in preperation).</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#how-to-use-spatial-partitioning-in-mlr">How to use spatial partitioning in mlr</a></li>
      <li><a href="#examples">Examples</a></li>
      <li><a href="#notes">Notes</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
